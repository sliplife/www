webpackJsonp([10],{1325:function(e,t,a){"use strict";function n(e,t){if(i)return localStorage.setItem(e,t)}function r(e){if(i)return localStorage.getItem(e)}function o(e){if(i)return localStorage.removeItem(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.setItem=n,t.getItem=r,t.removeItem=o;var i=!1;try{i="localStorage"in window;var l="tusSupport";localStorage.setItem(l,localStorage.getItem(l))}catch(e){if(e.code!==e.SECURITY_ERR&&e.code!==e.QUOTA_EXCEEDED_ERR)throw e;i=!1}t.canStoreURLs=i},1331:function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=a(74),l=a.n(i),s=a(305),u=a.n(s),c=a(0),h=a.n(c),p=a(51),d=a(186),y=(a.n(d),a(118)),f=a(62),m=a(73),v=(a.n(m),a(574)),g=a(1384),k=a.n(g);a.d(t,"default",function(){return P});var _,x,E,b,C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},w=function(e){return{auth:e.auth,error:e.listings.error}},S=function(e){return{dispatch:e,actions:{alert:a.i(y.a)(f.d,e),listings:a.i(y.a)(f.b,e),uploads:a.i(y.a)(f.f,e)}}},P=(_=a.i(p.connect)(w,S))((b=E=function(e){function t(a){n(this,t);var o=r(this,e.call(this,a));return o.state={isLoading:!0,isUploading:!1,listing:{amenities:[],city:"",country:"us",description:"",email:"",location:"",phone:"",price:"",uploads:[],state:"",street:"",terms:"",termType:"flat_rate",type:"",vhfChannel:"",zip:""}},o.handleChange=o.handleChange.bind(o),o.handleContinue=o.handleContinue.bind(o),o.handleCountryChange=o.handleCountryChange.bind(o),o.handleStateChange=o.handleStateChange.bind(o),o.handleAmenityChange=o.handleAmenityChange.bind(o),o.handleLocationChange=o.handleLocationChange.bind(o),o.handleTypeChange=o.handleTypeChange.bind(o),o.handlePaymentTermsChange=o.handlePaymentTermsChange.bind(o),o.handlePaymentTermTypeChange=o.handlePaymentTermTypeChange.bind(o),o.handleSelectPhotos=o.handleSelectPhotos.bind(o),o}return o(t,e),t.prototype.componentWillMount=function(){return this.props.auth.user?this.props.steps.listing.completed?this.props.dispatch(a.i(d.replace)("/submit/billing")):(this.setState({isLoading:!1}),void this.props.setActiveStep("listing")):this.props.dispatch(a.i(d.replace)("/submit"))},t.prototype.componentWillUnmount=function(){this.clearTusStorage(),this.props.setActiveStep(!1)},t.prototype.componentDidMount=function(){this.clearTusStorage(),this.handleSelectPhotosChanges(),v.a.done()},t.prototype.hasValidationError=function(e){return!(!l()(this.props.error,"validation.keys")||!this.props.error.validation.keys.includes(e))},t.prototype.clearTusStorage=function(){for(var e in localStorage)u()(e,"tus")&&localStorage.removeItem(e)},t.prototype.handleContinue=function(e){var t=this;e.preventDefault(),this.setState({isLoading:!0},function(){var e=t.state.listing;t.props.actions.listings.create(C({},e)).then(function(e){t.clearTusStorage(),t.props.setCompletedStep("listing"),t.props.dispatch(a.i(d.push)("/submit/billing"))}).catch(function(e){t.setState({isLoading:!1}),t.props.actions.alert.error(e.message)})})},t.prototype.handleChange=function(e){var t=this.state.listing;t[e.target.name]=e.target.value,this.setState({listing:t})},t.prototype.handleStateChange=function(e,t){this.setState({listing:C({},this.state.listing,{state:t.value})})},t.prototype.handleAmenityChange=function(e,t){this.setState({listing:C({},this.state.listing,{amenities:t.value})})},t.prototype.handleLocationChange=function(e,t){this.setState({listing:C({},this.state.listing,{location:t.value})})},t.prototype.handleTypeChange=function(e,t){this.setState({listing:C({},this.state.listing,{type:t.value})})},t.prototype.handlePaymentTermsChange=function(e,t){this.setState({listing:C({},this.state.listing,{terms:t.value})})},t.prototype.handlePaymentTermTypeChange=function(e,t){this.setState({listing:C({},this.state.listing,{termType:t.value})})},t.prototype.handleCountryChange=function(e,t){this.setState({listing:C({},this.state.listing,{country:t.value})})},t.prototype.componentDidMount=function(){this.handleSelectPhotosChanges()},t.prototype.processFileUploads=function(){var e=this;this.setState({isUploading:!0});for(var t=this.fileInput.files,a=function(){if(r){if(o>=n.length)return"break";i=n[o++]}else{if(o=n.next(),o.done)return"break";i=o.value}var t=i,a=new k.a.Upload(t,{resume:!0,endpoint:"/api/uploads",headers:{},onError:function(t){e.setState({isUploading:!1},function(){return e.props.actions.alert.error(t)}),v.a.done()},onProgress:function(t,a){e.setState({isUploading:!0});var n=(t/a*100).toFixed(2);v.a.set(n/100)},onSuccess:function(){var t=new RegExp(".*/uploads/(.*)$").exec(a.url)[1],n=e.state.listing.uploads;n.includes(t)||(n.push(t),e.setState({isUploading:!1,listing:C({},e.state.listing,{uploads:n})}))}});a.start()},n=t,r=Array.isArray(n),o=0,n=r?n:n[Symbol.iterator]();;){var i;if("break"===a())break}},t.prototype.handleSelectPhotos=function(e){e.preventDefault(),this.fileInput.click()},t.prototype.handleSelectPhotosChanges=function(){var e=this;this.fileInput.addEventListener("change",function(t){return e.processFileUploads()})},t.prototype.render=function(){var e=this,t=[{key:"AL",value:"Alabama",text:"Alabama"},{key:"AK",value:"Alaska",text:"Alaska"},{key:"AS",value:"American Samoa",text:"American Samoa"},{key:"AZ",value:"Arizona",text:"Arizona"},{key:"AR",value:"Arkansas",text:"Arkansas"},{key:"CA",value:"California",text:"California"},{key:"CO",value:"Colorado",text:"Colorado"},{key:"CT",value:"Connecticut",text:"Connecticut"},{key:"DE",value:"Delaware",text:"Delaware"},{key:"DC",value:"District Of Columbia",text:"District Of Columbia"},{key:"FM",value:"Federated States Of Micronesia",text:"Federated States Of Micronesia"},{key:"FL",value:"Florida",text:"Florida"},{key:"GA",value:"Georgia",text:"Georgia"},{key:"GU",value:"Guam",text:"Guam"},{key:"HI",value:"Hawaii",text:"Hawaii"},{key:"ID",value:"Idaho",text:"Idaho"},{key:"IL",value:"Illinois",text:"Illinois"},{key:"IN",value:"Indiana",text:"Indiana"},{key:"IA",value:"Iowa",text:"Iowa"},{key:"KS",value:"Kansas",text:"Kansas"},{key:"KY",value:"Kentucky",text:"Kentucky"},{key:"LA",value:"Louisiana",text:"Louisiana"},{key:"ME",value:"Maine",text:"Maine"},{key:"MH",value:"Marshall Islands",text:"Marshall Islands"},{key:"MD",value:"Maryland",text:"Maryland"},{key:"MA",value:"Massachusetts",text:"Massachusetts"},{key:"MI",value:"Michigan",text:"Michigan"},{key:"MN",value:"Minnesota",text:"Minnesota"},{key:"MS",value:"Mississippi",text:"Mississippi"},{key:"MO",value:"Missouri",text:"Missouri"},{key:"MT",value:"Montana",text:"Montana"},{key:"NE",value:"Nebraska",text:"Nebraska"},{key:"NV",value:"Nevada",text:"Nevada"},{key:"NH",value:"New Hampshire",text:"New Hampshire"},{key:"NJ",value:"New Jersey",text:"New Jersey"},{key:"NM",value:"New Mexico",text:"New Mexico"},{key:"NY",value:"New York",text:"New York"},{key:"NC",value:"North Carolina",text:"North Carolina"},{key:"ND",value:"North Dakota",text:"North Dakota"},{key:"MP",value:"Northern Mariana Islands",text:"Northern Mariana Islands"},{key:"OH",value:"Ohio",text:"Ohio"},{key:"OK",value:"Oklahoma",text:"Oklahoma"},{key:"OR",value:"Oregon",text:"Oregon"},{key:"PW",value:"Palau",text:"Palau"},{key:"PA",value:"Pennsylvania",text:"Pennsylvania"},{key:"PR",value:"Puerto Rico",text:"Puerto Rico"},{key:"RI",value:"Rhode Island",text:"Rhode Island"},{key:"SC",value:"South Carolina",text:"South Carolina"},{key:"SD",value:"South Dakota",text:"South Dakota"},{key:"TN",value:"Tennessee",text:"Tennessee"},{key:"TX",value:"Texas",text:"Texas"},{key:"UT",value:"Utah",text:"Utah"},{key:"VT",value:"Vermont",text:"Vermont"},{key:"VI",value:"Virgin Islands",text:"Virgin Islands"},{key:"VA",value:"Virginia",text:"Virginia"},{key:"WA",value:"Washington",text:"Washington"},{key:"WV",value:"West Virginia",text:"West Virginia"},{key:"WI",value:"Wisconsin",text:"Wisconsin"},{key:"WY",value:"Wyomin",text:"Wyomin"}],a=[{key:"accessibility",value:"accessibility",text:"24 Hour Accessibility"},{key:"alcohol",value:"alcohol",text:"Alcohol"},{key:"anchorage",value:"anchorage",text:"Anchorage"},{key:"bait_tackle",value:"bait_tackle",text:"Bait & Tackle"},{key:"beach",value:"beach",text:"Beach"},{key:"bike_rentals",value:"bike_rentals",text:"Bike Rentals"},{key:"boat_ramp",value:"boat_ramp",text:"Boat Ramp"},{key:"cable_tv_hookup",value:"cable_tv_hookup",text:"Cable TV Hookup"},{key:"car_rentals",value:"car_rentals",text:"Car Rentals"},{key:"club_house",value:"club_house",text:"Club House"},{key:"covered_slips",value:"covered_slips",text:"Covered Slips"},{key:"deep_water",value:"deep_water",text:"Deep Water"},{key:"diesel",value:"diesel",text:"Diesel"},{key:"dinghy_dock",value:"dinghy_dock",text:"Dinghy Dock"},{key:"dockage",value:"dockage",text:"Dockage"},{key:"dog_park",value:"dog_park",text:"Dog Park"},{key:"dry_storage",value:"dry_storage",text:"Dry Storage"},{key:"electricity",value:"electricity",text:"Electricity"},{key:"engine_service",value:"engine_service",text:"Engine Service"},{key:"fitness_center",value:"fitness_center",text:"Fitness Center"},{key:"fixed_docks",value:"fixed_docks",text:"Fixed Docks"},{key:"floating_docks",value:"floating_docks",text:"Floating Docks"},{key:"fuel_dock",value:"fuel_dock",text:"Fuel Dock"},{key:"gas",value:"gas",text:"Gas"},{key:"golf",value:"golf",text:"Golf"},{key:"groceries",value:"groceries",text:"Groceries"},{key:"hotels",value:"hotels",text:"Hotels"},{key:"ice",value:"ice",text:"Ice"},{key:"internet",value:"internet",text:"Internet"},{key:"laundry",value:"laundry",text:"Laundry"},{key:"live_aboard_allowed",value:"live_aboard_allowed",text:"Live Aboard Allowed"},{key:"maintenance_facility",value:"maintenance_facility",text:"Maintenance Facility"},{key:"medical_facility",value:"medical_facility",text:"Medical Facility"},{key:"moorings",value:"moorings",text:"Moorings"},{key:"ocean_access",value:"ocean_access",text:"Ocean Access"},{key:"oil_disposal",value:"oil_disposal",text:"Oil Disposal"},{key:"pharmacy",value:"pharmacy",text:"Pharmacy"},{key:"pool",value:"pool",text:"Pool"},{key:"propane",value:"propane",text:"Propane"},{key:"propeller_service",value:"propeller_service",text:"Propeller Service"},{key:"pumpout",value:"pumpout",text:"Pump-out"},{key:"rack_storage",value:"rack_storage",text:"Rack Storage"},{key:"repair_crane",value:"repair_crane",text:"Repair Crane"},{key:"restaurants",value:"restaurants",text:"Restaurants"},{key:"restrooms",value:"restrooms",text:"Restrooms"},{key:"ship_store",value:"ship_store",text:"Ship Store"},{key:"showers",value:"showers",text:"Showers"},{key:"telephone_hookup",value:"telephone_hookup",text:"Telephone Hookup"},{key:"tennis",value:"tennis",text:"Tennis"},{key:"trash",value:"trash",text:"Trash"},{key:"trailer_storage",value:"trailer_storage",text:"Trailer Storage"},{key:"travel_lift",value:"travel_lift",text:"Travel Lift"},{key:"water_hookup",value:"water_hookup",text:"Water Hookup"},{key:"water_taxi",value:"water_taxi",text:"Water Taxi"},{key:"winter_storage",value:"winter_storage",text:"Winter Storage"},{key:"yacht_brokerage",value:"yacht_brokerage",text:"Yacht Brokerage"}],n=[{key:"dock",value:"dock",text:"Dock"},{key:"dry_storage",value:"dry_storage",text:"Dry Storage"},{key:"mooring",value:"mooring",text:"Mooring Buoy"},{key:"slip",value:"slip",text:"Slip"}],r=[{key:"condo",value:"condo",text:"Condo"},{key:"home",value:"home",text:"Home"},{key:"marina",value:"marina",text:"Marina"},{key:"vacant_lot",value:"vacant_lot",text:"Vacant Lot"}],o=[{key:"sale",value:"sale",text:"For Sale"},{key:"rent",value:"rent",text:"For Rent"}],i=[{key:"flat_rate",value:"flat_rate",text:"Flat Rate"},{key:"by_foot",value:"by_foot",text:"By Foot"}],l=[{key:"us",value:"us",flag:"us",text:"United States"}];return h.a.createElement("div",null,h.a.createElement(m.Segment,{as:m.Form,loading:this.state.isLoading},h.a.createElement("input",{multiple:!0,type:"file",style:{display:"none"},ref:function(t){e.fileInput=t}}),h.a.createElement(m.Form.Group,null,h.a.createElement(m.Form.Field,{error:this.hasValidationError("location"),width:"3"},h.a.createElement("label",null,"Location"),h.a.createElement(m.Dropdown,{fluid:!0,search:!0,selection:!0,placeholder:"Location",options:r,name:"location",onChange:this.handleLocationChange,value:this.state.listing.location})),h.a.createElement(m.Form.Field,{error:this.hasValidationError("type"),width:"4"},h.a.createElement("label",null,"Type"),h.a.createElement(m.Dropdown,{fluid:!0,search:!0,selection:!0,placeholder:"Type",options:n,name:"type",onChange:this.handleTypeChange,value:this.state.listing.type})),h.a.createElement(m.Form.Field,{error:this.hasValidationError("terms"),width:"3"},h.a.createElement("label",null,"Terms"),h.a.createElement(m.Dropdown,{fluid:!0,search:!0,selection:!0,placeholder:"Terms",options:o,name:"terms",onChange:this.handlePaymentTermsChange,value:this.state.listing.terms})),h.a.createElement(m.Form.Field,{error:this.hasValidationError("price"),width:"6"},h.a.createElement("label",null,"Price"),h.a.createElement(m.Input,{label:h.a.createElement(m.Dropdown,{options:i,name:"termType",onChange:this.handlePaymentTermTypeChange,value:this.state.listing.termType}),name:"price",labelPosition:"right",placeholder:"Price",onChange:this.handleChange,value:this.state.listing.price}))),h.a.createElement(m.Divider,{horizontal:!0},h.a.createElement(m.Icon,{circular:!0,name:"marker",color:"blue"})),h.a.createElement(m.Form.Group,null,h.a.createElement(m.Form.Field,{error:this.hasValidationError("street"),width:"16"},h.a.createElement("label",null,"Street"),h.a.createElement(m.Input,{name:"street",onChange:this.handleChange,placeholder:"Street",type:"text",value:this.state.listing.street}))),h.a.createElement(m.Form.Group,null,h.a.createElement(m.Form.Field,{error:this.hasValidationError("city"),width:"6"},h.a.createElement("label",null,"City"),h.a.createElement(m.Input,{name:"city",onChange:this.handleChange,placeholder:"City",type:"text",value:this.state.listing.city})),h.a.createElement(m.Form.Field,{error:this.hasValidationError("state"),width:"6"},h.a.createElement("label",null,"State"),h.a.createElement(m.Dropdown,{fluid:!0,search:!0,selection:!0,placeholder:"State",options:t,name:"state",onChange:this.handleStateChange,value:this.state.listing.state})),h.a.createElement(m.Form.Field,{error:this.hasValidationError("zip"),width:"4"},h.a.createElement("label",null,"ZIP Code"),h.a.createElement(m.Input,{name:"zip",onChange:this.handleChange,placeholder:"ZIP Code",type:"text",value:this.state.listing.zip})),h.a.createElement(m.Form.Field,{error:this.hasValidationError("country"),width:"7"},h.a.createElement("label",null,"Country"),h.a.createElement(m.Dropdown,{fluid:!0,search:!0,selection:!0,placeholder:"Country",options:l,name:"country",onChange:this.handleCountryChange,value:this.state.listing.country}))),h.a.createElement(m.Divider,{horizontal:!0},h.a.createElement(m.Icon,{circular:!0,name:"conversation",color:"blue"})),h.a.createElement(m.Form.Group,null,h.a.createElement(m.Form.Field,{error:this.hasValidationError("name"),width:8},h.a.createElement("label",null,"Name"),h.a.createElement(m.Input,{name:"name",onChange:this.handleChange,placeholder:"Name",type:"text",value:this.state.listing.name})),h.a.createElement(m.Form.Field,{error:this.hasValidationError("phone"),width:5},h.a.createElement("label",null,"Phone"),h.a.createElement(m.Input,{name:"phone",onChange:this.handleChange,placeholder:"Phone",type:"text",value:this.state.listing.phone})),h.a.createElement(m.Form.Field,{error:this.hasValidationError("vhfChannel"),width:3},h.a.createElement("label",null,"VHF Channel"),h.a.createElement(m.Input,{name:"vhfChannel",onChange:this.handleChange,placeholder:"VHF Channel",type:"text",value:this.state.listing.vhfChannel}))),h.a.createElement(m.Form.Group,{widths:"equal"},h.a.createElement(m.Form.Field,{error:this.hasValidationError("email")},h.a.createElement("label",null,"Email"),h.a.createElement(m.Input,{name:"email",onChange:this.handleChange,placeholder:"Email",type:"text",value:this.state.listing.email})),h.a.createElement(m.Form.Field,{error:this.hasValidationError("website")},h.a.createElement("label",null,"Website"),h.a.createElement(m.Input,{name:"website",onChange:this.handleChange,placeholder:"Website URL",type:"text",value:this.state.listing.website}))),h.a.createElement(m.Divider,{horizontal:!0},h.a.createElement(m.Icon,{circular:!0,name:"anchor",color:"blue"})),h.a.createElement(m.Form.Group,null,h.a.createElement(m.Form.Field,{error:this.hasValidationError("length"),width:4},h.a.createElement("label",null,"Max Length"),h.a.createElement(m.Input,{name:"length",onChange:this.handleChange,placeholder:"Max Length",type:"text",value:this.state.listing.length})),h.a.createElement(m.Form.Field,{error:this.hasValidationError("beam"),width:4},h.a.createElement("label",null,"Max Beam"),h.a.createElement(m.Input,{name:"beam",onChange:this.handleChange,placeholder:"Max Beam",type:"text",value:this.state.listing.beam})),h.a.createElement(m.Form.Field,{error:this.hasValidationError("draw"),width:4},h.a.createElement("label",null,"Max Draw"),h.a.createElement(m.Input,{name:"draw",onChange:this.handleChange,placeholder:"Max Draw",type:"text",value:this.state.listing.draw})),h.a.createElement(m.Form.Field,{error:this.hasValidationError("clearance"),width:4},h.a.createElement("label",null,"Max Clearance"),h.a.createElement(m.Input,{name:"clearance",onChange:this.handleChange,placeholder:"Max Clearance",type:"text",value:this.state.listing.clearance}))),h.a.createElement(m.Divider,{horizontal:!0},h.a.createElement(m.Icon,{circular:!0,name:"list",color:"blue"})),h.a.createElement(m.Form.Field,{error:this.hasValidationError("amenities")},h.a.createElement("label",null,"Amenities"),h.a.createElement(m.Dropdown,{fluid:!0,search:!0,selection:!0,multiple:!0,placeholder:"Amenities",options:a,name:"amenities",onChange:this.handleAmenityChange,value:this.state.listing.amenities})),h.a.createElement(m.Form.Field,{error:this.hasValidationError("description")},h.a.createElement("label",null,"Description"),h.a.createElement(m.TextArea,{name:"description",onChange:this.handleChange,placeholder:"Description",type:"text",value:this.state.listing.description})),h.a.createElement(m.Divider,{horizontal:!0},h.a.createElement(m.Icon,{circular:!0,name:"photo",color:"blue"})),h.a.createElement(m.Button,{fluid:!0,disabled:this.state.isUploading,loading:this.state.isUploading,content:"Select Photos ("+this.state.listing.uploads.length+")",onClick:this.handleSelectPhotos})),h.a.createElement(m.Segment,null,h.a.createElement(m.Button,{fluid:!0,primary:!0,disabled:this.state.isLoading,loading:this.state.isLoading,onClick:this.handleContinue,icon:"right arrow",labelPosition:"right",content:"Continue"})))},t}(h.a.Component),E.propTypes={dispatch:c.PropTypes.func,error:c.PropTypes.any,actions:c.PropTypes.object.isRequired,auth:c.PropTypes.object.isRequired,setActiveStep:c.PropTypes.func.isRequired,setCompletedStep:c.PropTypes.func.isRequired,steps:c.PropTypes.object.isRequired},x=b))||x},1337:function(e,t,a){"use strict";var n=Object.prototype.hasOwnProperty,r=Object.prototype.toString,o=function(e){return"function"==typeof Array.isArray?Array.isArray(e):"[object Array]"===r.call(e)},i=function(e){if(!e||"[object Object]"!==r.call(e))return!1;var t=n.call(e,"constructor"),a=e.constructor&&e.constructor.prototype&&n.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!t&&!a)return!1;var o;for(o in e);return void 0===o||n.call(e,o)};e.exports=function e(){var t,a,n,r,l,s,u=arguments[0],c=1,h=arguments.length,p=!1;for("boolean"==typeof u?(p=u,u=arguments[1]||{},c=2):("object"!=typeof u&&"function"!=typeof u||null==u)&&(u={});c<h;++c)if(null!=(t=arguments[c]))for(a in t)n=u[a],r=t[a],u!==r&&(p&&r&&(i(r)||(l=o(r)))?(l?(l=!1,s=n&&o(n)?n:[]):s=n&&i(n)?n:{},u[a]=e(p,s,r)):void 0!==r&&(u[a]=r));return u}},1377:function(e,t,a){var n,r;!function(o,i){n=i,void 0!==(r="function"==typeof n?n.call(t,a,t,e):n)&&(e.exports=r)}(0,function(){function e(){var e=arguments.length;if(0===e)throw new Error("resolveUrl requires at least one argument; got none.");var t=document.createElement("base");if(t.href=arguments[0],1===e)return t.href;var a=document.getElementsByTagName("head")[0];a.insertBefore(t,a.firstChild);for(var n,r=document.createElement("a"),o=1;o<e;o++)r.href=arguments[o],n=r.href,t.href=n;return a.removeChild(t),n}return e})},1379:function(e,t,a){"use strict";function n(e){return o(unescape(encodeURIComponent(e)))}Object.defineProperty(t,"__esModule",{value:!0}),t.encode=n;var r=window,o=r.btoa;t.isSupported="btoa"in window},1380:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(){return new window.XMLHttpRequest}function o(e,t){return(0,l.default)(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.newRequest=r,t.resolveUrl=o;var i=a(1377),l=n(i)},1381:function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e){if("function"==typeof e.slice&&void 0!==e.size)return new i(e);throw new Error("source object may only be an instance of File or Blob in this environment")}var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();Object.defineProperty(t,"__esModule",{value:!0}),t.getSource=r;var i=function(){function e(t){n(this,e),this._file=t,this.size=t.size}return o(e,[{key:"slice",value:function(e,t){return this._file.slice(e,t)}},{key:"close",value:function(){}}]),e}()},1382:function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(e){var a=arguments.length<=1||void 0===arguments[1]?null:arguments[1],o=arguments.length<=2||void 0===arguments[2]?null:arguments[2];n(this,t);var i=r(this,Object.getPrototypeOf(t).call(this,e.message));i.originalRequest=o,i.causingError=a;var l=e.message;return null!=a&&(l+=", caused by "+a.toString()),null!=o&&(l+=", originated from request (response code: "+o.status+", response text: "+o.responseText+")"),i.message=l,i}return o(t,e),t}(Error);t.default=i},1383:function(e,t,a){"use strict";function n(e){return["tus",e.name,e.type,e.size,e.lastModified].join("-")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},1384:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var r=a(1385),o=n(r),i=a(1325),l=o.default.defaultOptions;if("undefined"!=typeof window)var s=window,u=s.XMLHttpRequest,c=s.Blob,h=u&&c&&"function"==typeof c.prototype.slice;else var h=!0;e.exports={Upload:o.default,isSupported:h,canStoreURLs:i.canStoreURLs,defaultOptions:l}},1385:function(e,t,a){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){if(!v.isSupported)return"";var t=[];for(var a in e)t.push(a+" "+v.encode(e[a]));return t.join(",")}var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();Object.defineProperty(t,"__esModule",{value:!0});var s=a(1383),u=r(s),c=a(1382),h=r(c),p=a(1337),d=r(p),y=a(1380),f=a(1381),m=a(1379),v=n(m),g=a(1325),k=n(g),_={endpoint:"",fingerprint:u.default,resume:!0,onProgress:null,onChunkComplete:null,onSuccess:null,onError:null,headers:{},chunkSize:1/0,withCredentials:!1,uploadUrl:null,uploadSize:null,overridePatchMethod:!1,retryDelays:null},x=function(){function e(t,a){o(this,e),this.options=(0,d.default)(!0,{},_,a),this.file=t,this.url=null,this._xhr=null,this._fingerprint=null,this._offset=null,this._aborted=!1,this._size=null,this._source=null,this._retryAttempt=0,this._retryTimeout=null,this._offsetBeforeRetry=0}return l(e,[{key:"start",value:function(){var e=this,t=this.file;if(!t)return void this._emitError(new Error("tus: no file or stream to upload provided"));if(!this.options.endpoint)return void this._emitError(new Error("tus: no endpoint provided"));var a=this._source=(0,f.getSource)(t,this.options.chunkSize);if(null!=this.options.uploadSize){var n=+this.options.uploadSize;if(isNaN(n))throw new Error("tus: cannot convert `uploadSize` option into a number");this._size=n}else{var n=a.size;if(null==n)throw new Error("tus: cannot automatically derive upload's size from input and must be specified manually using the `uploadSize` option");this._size=n}var r=this.options.retryDelays;if(null!=r){if("[object Array]"!==Object.prototype.toString.call(r))throw new Error("tus: the `retryDelays` option must either be an array or null");!function(){var t=e.options.onError;e.options.onError=function(a){e.options.onError=t,null!=e._offset&&e._offset>e._offsetBeforeRetry&&(e._retryAttempt=0);var n=!0;if("undefined"!=typeof window&&"navigator"in window&&!1===window.navigator.onLine&&(n=!1),!(e._retryAttempt<r.length&&null!=a.originalRequest&&n))return void e._emitError(a);var o=r[e._retryAttempt++];e._offsetBeforeRetry=e._offset,e.options.uploadUrl=e.url,e._retryTimeout=setTimeout(function(){e.start()},o)}}()}if(null!=this.options.uploadUrl)return this.url=this.options.uploadUrl,void this._resumeUpload();if(this.options.resume){this._fingerprint=this.options.fingerprint(t);var o=k.getItem(this._fingerprint);if(null!=o)return this.url=o,void this._resumeUpload()}this._createUpload()}},{key:"abort",value:function(){null!==this._xhr&&(this._xhr.abort(),this._source.close(),this._aborted=!0),null!=this._retryTimeout&&(clearTimeout(this._retryTimeout),this._retryTimeout=null)}},{key:"_emitXhrError",value:function(e,t,a){this._emitError(new h.default(t,a,e))}},{key:"_emitError",value:function(e){if("function"!=typeof this.options.onError)throw e;this.options.onError(e)}},{key:"_emitSuccess",value:function(){"function"==typeof this.options.onSuccess&&this.options.onSuccess()}},{key:"_emitProgress",value:function(e,t){"function"==typeof this.options.onProgress&&this.options.onProgress(e,t)}},{key:"_emitChunkComplete",value:function(e,t,a){"function"==typeof this.options.onChunkComplete&&this.options.onChunkComplete(e,t,a)}},{key:"_setupXHR",value:function(e){e.setRequestHeader("Tus-Resumable","1.0.0");var t=this.options.headers;for(var a in t)e.setRequestHeader(a,t[a]);e.withCredentials=this.options.withCredentials}},{key:"_createUpload",value:function(){var e=this,t=(0,y.newRequest)();t.open("POST",this.options.endpoint,!0),t.onload=function(){if(!(t.status>=200&&t.status<300))return void e._emitXhrError(t,new Error("tus: unexpected response while creating upload"));e.url=(0,y.resolveUrl)(e.options.endpoint,t.getResponseHeader("Location")),e.options.resume&&k.setItem(e._fingerprint,e.url),e._offset=0,e._startUpload()},t.onerror=function(a){e._emitXhrError(t,new Error("tus: failed to create upload"),a)},this._setupXHR(t),t.setRequestHeader("Upload-Length",this._size);var a=i(this.options.metadata);""!==a&&t.setRequestHeader("Upload-Metadata",a),t.send(null)}},{key:"_resumeUpload",value:function(){var e=this,t=(0,y.newRequest)();t.open("HEAD",this.url,!0),t.onload=function(){if(!(t.status>=200&&t.status<300))return e.options.resume&&k.removeItem(e._fingerprint),e.url=null,void e._createUpload();var a=parseInt(t.getResponseHeader("Upload-Offset"),10);if(isNaN(a))return void e._emitXhrError(t,new Error("tus: invalid or missing offset value"));var n=parseInt(t.getResponseHeader("Upload-Length"),10);return isNaN(n)?void e._emitXhrError(t,new Error("tus: invalid or missing length value")):a===n?(e._emitProgress(n,n),void e._emitSuccess()):(e._offset=a,void e._startUpload())},t.onerror=function(a){e._emitXhrError(t,new Error("tus: failed to resume upload"),a)},this._setupXHR(t),t.send(null)}},{key:"_startUpload",value:function(){var e=this,t=this._xhr=(0,y.newRequest)();this.options.overridePatchMethod?(t.open("POST",this.url,!0),t.setRequestHeader("X-HTTP-Method-Override","PATCH")):t.open("PATCH",this.url,!0),t.onload=function(){if(!(t.status>=200&&t.status<300))return void e._emitXhrError(t,new Error("tus: unexpected response while uploading chunk"));var a=parseInt(t.getResponseHeader("Upload-Offset"),10);return isNaN(a)?void e._emitXhrError(t,new Error("tus: invalid or missing offset value")):(e._emitProgress(a,e._size),e._emitChunkComplete(a-e._offset,a,e._size),e._offset=a,a==e._size?(e._emitSuccess(),void e._source.close()):void e._startUpload())},t.onerror=function(a){e._aborted||e._emitXhrError(t,new Error("tus: failed to upload chunk at offset "+e._offset),a)},"upload"in t&&(t.upload.onprogress=function(t){t.lengthComputable&&e._emitProgress(a+t.loaded,e._size)}),this._setupXHR(t),t.setRequestHeader("Upload-Offset",this._offset),t.setRequestHeader("Content-Type","application/offset+octet-stream");var a=this._offset,n=this._offset+this.options.chunkSize;(n===1/0||n>this._size)&&(n=this._size),t.send(this._source.slice(a,n))}}]),e}();x.defaultOptions=_,t.default=x}});
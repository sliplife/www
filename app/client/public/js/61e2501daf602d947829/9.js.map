{"version":3,"sources":["webpack:///61e2501daf602d947829/9.js","webpack:///./~/tus-js-client/lib.es5/browser/storage.js","webpack:///./app/client/assets/js/components/Submit/Listing/index.js","webpack:///./~/extend/index.js","webpack:///./~/resolve-url/resolve-url.js","webpack:///./~/tus-js-client/lib.es5/browser/base64.js","webpack:///./~/tus-js-client/lib.es5/browser/request.js","webpack:///./~/tus-js-client/lib.es5/browser/source.js","webpack:///./~/tus-js-client/lib.es5/error.js","webpack:///./~/tus-js-client/lib.es5/fingerprint.js","webpack:///./~/tus-js-client/lib.es5/index.js","webpack:///./~/tus-js-client/lib.es5/upload.js"],"names":["webpackJsonp","1304","module","exports","__webpack_require__","setItem","key","value","hasStorage","localStorage","getItem","removeItem","Object","defineProperty","window","e","code","SECURITY_ERR","QUOTA_EXCEEDED_ERR","canStoreURLs","1310","__webpack_exports__","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","create","constructor","enumerable","writable","configurable","setPrototypeOf","__proto__","__WEBPACK_IMPORTED_MODULE_0_lodash_get__","__WEBPACK_IMPORTED_MODULE_0_lodash_get___default","n","__WEBPACK_IMPORTED_MODULE_1_react__","__WEBPACK_IMPORTED_MODULE_1_react___default","__WEBPACK_IMPORTED_MODULE_2_react_redux__","__WEBPACK_IMPORTED_MODULE_3_react_router_redux__","__WEBPACK_IMPORTED_MODULE_4_redux__","__WEBPACK_IMPORTED_MODULE_5_actions__","__WEBPACK_IMPORTED_MODULE_6_semantic_ui_react__","__WEBPACK_IMPORTED_MODULE_7_components__","__WEBPACK_IMPORTED_MODULE_8_tus_js_client__","__WEBPACK_IMPORTED_MODULE_8_tus_js_client___default","d","SubmitListing","_dec","_class","_class2","_temp","_extends","assign","target","i","arguments","length","source","hasOwnProperty","mapStateToProps","state","auth","error","listings","mapDispatchToProps","dispatch","actions","alert","uploads","_React$Component","props","this","_this","isLoading","photos","listing","amenities","city","description","type","handleChange","bind","handleContinue","handleStateChange","handleAmenityChange","handleTypeChange","handleSave","handleSelectPhotos","componentWillMount","user","setState","setActiveStep","componentWillUnmount","componentDidMount","handleSelectPhotosChanges","done","hasValidationError","validationKey","validation","keys","includes","event","_this2","preventDefault","then","response","payload","catch","message","name","data","handleUpload","_this3","files","fileInput","_loop","_isArray","_i","_iterator","_ref","next","file","upload","a","Upload","endpoint","headers","onError","onProgress","bytesUploaded","bytesTotal","percentage","toFixed","set","onSuccess","id","RegExp","exec","url","update","listingId","setCompletedStep","start","Array","isArray","Symbol","iterator","click","_this4","addEventListener","_this5","persist","render","_this6","stateOptions","text","amenityOptions","typeOptions","createElement","as","multiple","style","display","ref","input","Group","Field","width","fluid","search","selection","placeholder","options","onChange","horizontal","circular","color","content","onClick","primary","disabled","loading","icon","labelPosition","Component","propTypes","func","object","isRequired","steps","1311","hasOwn","toStr","toString","arr","isPlainObject","obj","hasOwnConstructor","hasIsPrototypeOf","extend","src","copy","copyIsArray","clone","deep","1318","__WEBPACK_AMD_DEFINE_FACTORY__","__WEBPACK_AMD_DEFINE_RESULT__","root","factory","undefined","resolveUrl","numUrls","Error","base","document","href","head","getElementsByTagName","insertBefore","firstChild","resolved","index","removeChild","1319","encode","btoa","unescape","encodeURIComponent","_window","isSupported","1320","_interopRequireDefault","__esModule","default","newRequest","XMLHttpRequest","origin","link","_resolveUrl2","_resolveUrl","1321","getSource","slice","size","FileSource","_createClass","defineProperties","descriptor","protoProps","staticProps","_file","end","1322","DetailedError","_Error","causingErr","xhr","getPrototypeOf","originalRequest","causingError","status","responseText","1323","fingerprint","lastModified","join","1324","_upload","_upload2","_storage","defaultOptions","Blob","1325","_interopRequireWildcard","newObj","encodeMetadata","metadata","Base64","encoded","push","_fingerprint","_fingerprint2","_error","_error2","_extend","_extend2","_request","_source","_base","Storage","resume","onChunkComplete","chunkSize","Infinity","withCredentials","uploadUrl","uploadSize","overridePatchMethod","retryDelays","_xhr","_offset","_aborted","_size","_retryAttempt","_retryTimeout","_offsetBeforeRetry","_emitError","isNaN","errorCallback","err","isOnline","navigator","onLine","delay","setTimeout","_resumeUpload","resumedUrl","_createUpload","abort","close","clearTimeout","bytesSent","bytesAccepted","setRequestHeader","open","onload","_emitXhrError","getResponseHeader","_startUpload","onerror","_setupXHR","send","offset","parseInt","_emitProgress","_emitSuccess","_emitChunkComplete","onprogress","lengthComputable","loaded"],"mappings":"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","file":"61e2501daf602d947829/9.js","sourcesContent":["webpackJsonp([9],{\n\n/***/ 1304:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n// Generated by Babel\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.setItem = setItem;\nexports.getItem = getItem;\nexports.removeItem = removeItem;\n/* global window, localStorage */\n\nvar hasStorage = false;\ntry {\n  hasStorage = \"localStorage\" in window;\n\n  // Attempt to store and read entries from the local storage to detect Private\n  // Mode on Safari on iOS (see #49)\n  var key = \"tusSupport\";\n  localStorage.setItem(key, localStorage.getItem(key));\n} catch (e) {\n  // If we try to access localStorage inside a sandboxed iframe, a SecurityError\n  // is thrown. When in private mode on iOS Safari, a QuotaExceededError is\n  // thrown (see #49)\n  if (e.code === e.SECURITY_ERR || e.code === e.QUOTA_EXCEEDED_ERR) {\n    hasStorage = false;\n  } else {\n    throw e;\n  }\n}\n\nvar canStoreURLs = exports.canStoreURLs = hasStorage;\n\nfunction setItem(key, value) {\n  if (!hasStorage) return;\n  return localStorage.setItem(key, value);\n}\n\nfunction getItem(key) {\n  if (!hasStorage) return;\n  return localStorage.getItem(key);\n}\n\nfunction removeItem(key) {\n  if (!hasStorage) return;\n  return localStorage.removeItem(key);\n}\n\n/***/ }),\n\n/***/ 1310:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_lodash_get__ = __webpack_require__(73);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_lodash_get___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_lodash_get__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_react__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_react_redux__ = __webpack_require__(51);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_react_router_redux__ = __webpack_require__(185);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_react_router_redux___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_react_router_redux__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_redux__ = __webpack_require__(117);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_actions__ = __webpack_require__(72);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_semantic_ui_react__ = __webpack_require__(71);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_semantic_ui_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_semantic_ui_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_components__ = __webpack_require__(571);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_tus_js_client__ = __webpack_require__(1324);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_tus_js_client___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_8_tus_js_client__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return SubmitListing; });\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _dec, _class, _class2, _temp;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\n\n\n\n\n\n\n\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    auth: state.auth,\n    error: state.listings.error\n  };\n};\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    dispatch: dispatch,\n    actions: {\n      alert: __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_4_redux__[\"a\" /* bindActionCreators */])(__WEBPACK_IMPORTED_MODULE_5_actions__[\"b\" /* alert */], dispatch),\n      listings: __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_4_redux__[\"a\" /* bindActionCreators */])(__WEBPACK_IMPORTED_MODULE_5_actions__[\"c\" /* listings */], dispatch),\n      uploads: __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_4_redux__[\"a\" /* bindActionCreators */])(__WEBPACK_IMPORTED_MODULE_5_actions__[\"d\" /* uploads */], dispatch)\n    }\n  };\n};\n\nvar SubmitListing = (_dec = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2_react_redux__[\"connect\"])(mapStateToProps, mapDispatchToProps), _dec(_class = (_temp = _class2 = function (_React$Component) {\n  _inherits(SubmitListing, _React$Component);\n\n  function SubmitListing(props) {\n    _classCallCheck(this, SubmitListing);\n\n    var _this = _possibleConstructorReturn(this, _React$Component.call(this, props));\n\n    _this.state = {\n      isLoading: true,\n      photos: [],\n      listing: {\n        amenities: [],\n        city: '',\n        description: '',\n        state: '',\n        type: ''\n      }\n    };\n\n    _this.handleChange = _this.handleChange.bind(_this);\n    _this.handleContinue = _this.handleContinue.bind(_this);\n    _this.handleStateChange = _this.handleStateChange.bind(_this);\n    _this.handleAmenityChange = _this.handleAmenityChange.bind(_this);\n    _this.handleTypeChange = _this.handleTypeChange.bind(_this);\n    _this.handleSave = _this.handleSave.bind(_this);\n    _this.handleSelectPhotos = _this.handleSelectPhotos.bind(_this);\n    return _this;\n  }\n\n  SubmitListing.prototype.componentWillMount = function componentWillMount() {\n\n    if (!this.props.auth.user) {\n      return this.props.dispatch(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3_react_router_redux__[\"push\"])('/submit'));\n    }\n    this.setState({ isLoading: false });\n    this.props.setActiveStep('listing');\n  };\n\n  SubmitListing.prototype.componentWillUnmount = function componentWillUnmount() {\n\n    this.props.setActiveStep(false);\n  };\n\n  SubmitListing.prototype.componentDidMount = function componentDidMount() {\n\n    this.handleSelectPhotosChanges();\n    __WEBPACK_IMPORTED_MODULE_7_components__[\"a\" /* NProgress */].done();\n  };\n\n  SubmitListing.prototype.hasValidationError = function hasValidationError(validationKey) {\n\n    return __WEBPACK_IMPORTED_MODULE_0_lodash_get___default()(this.props.error, 'validation.keys') && this.props.error.validation.keys.includes(validationKey) ? true : false;\n  };\n\n  SubmitListing.prototype.handleContinue = function handleContinue(event) {\n    var _this2 = this;\n\n    event.preventDefault();\n    this.setState({ isLoading: true }, function () {\n      var listing = _this2.state.listing;\n\n      _this2.props.actions.listings.create(_extends({}, listing)).then(function (response) {\n\n        _this2.setState({ listing: _extends({}, response.payload.listing) });\n        _this2.handleSave(event);\n      }).catch(function (error) {\n\n        _this2.setState({ isLoading: false });\n        _this2.props.actions.alert.error(error.message);\n      });\n    });\n  };\n\n  SubmitListing.prototype.handleChange = function handleChange(event) {\n    var listing = this.state.listing;\n\n    listing[event.target.name] = event.target.value;\n    this.setState({ listing: listing });\n  };\n\n  SubmitListing.prototype.handleStateChange = function handleStateChange(event, data) {\n\n    this.setState({ listing: _extends({}, this.state.listing, { state: data.value }) });\n  };\n\n  SubmitListing.prototype.handleAmenityChange = function handleAmenityChange(event, data) {\n\n    this.setState({ listing: _extends({}, this.state.listing, { amenities: data.value }) });\n  };\n\n  SubmitListing.prototype.handleTypeChange = function handleTypeChange(event, data) {\n\n    this.setState({ listing: _extends({}, this.state.listing, { type: data.value }) });\n  };\n\n  SubmitListing.prototype.componentDidMount = function componentDidMount() {\n\n    this.handleSelectPhotosChanges();\n  };\n\n  SubmitListing.prototype.handleUpload = function handleUpload(event) {\n    var _this3 = this;\n\n    var files = this.fileInput.files;\n    // Get the selected upload(s) from the input element.\n\n    var _loop = function _loop() {\n      if (_isArray) {\n        if (_i >= _iterator.length) return 'break';\n        _ref = _iterator[_i++];\n      } else {\n        _i = _iterator.next();\n        if (_i.done) return 'break';\n        _ref = _i.value;\n      }\n\n      var file = _ref;\n\n      // Create a new tus upload\n      var upload = new __WEBPACK_IMPORTED_MODULE_8_tus_js_client___default.a.Upload(file, {\n        endpoint: '/api/uploads',\n        headers: {\n          // Authorization: ['Bearer', getAuthenticationToken()].join(' ')\n        },\n        onError: function onError(error) {\n\n          _this3.setState({ isLoading: false }, function () {\n            return _this3.props.actions.alert.error(error);\n          });\n          __WEBPACK_IMPORTED_MODULE_7_components__[\"a\" /* NProgress */].done();\n        },\n        onProgress: function onProgress(bytesUploaded, bytesTotal) {\n\n          var percentage = (bytesUploaded / bytesTotal * 100).toFixed(2);\n          __WEBPACK_IMPORTED_MODULE_7_components__[\"a\" /* NProgress */].set(percentage / 100);\n        },\n        onSuccess: function onSuccess() {\n\n          var id = new RegExp('.*/uploads/(.*)$').exec(upload.url)[1];\n          _this3.props.actions.uploads.update({ id: id, listingId: _this3.state.listing.id }).then(function (response) {\n\n            _this3.props.setCompletedStep('listing');\n            _this3.props.dispatch(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3_react_router_redux__[\"push\"])('/submit/billing'));\n          }).catch(function (error) {\n            return _this3.props.actions.alert.error(error.message);\n          });\n        }\n      });\n      // Start the upload\n      upload.start();\n    };\n\n    for (var _iterator = files, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {\n      var _ref;\n\n      var _ret = _loop();\n\n      if (_ret === 'break') break;\n    }\n  };\n\n  SubmitListing.prototype.handleSelectPhotos = function handleSelectPhotos(event) {\n\n    event.preventDefault();\n    this.fileInput.click();\n  };\n\n  SubmitListing.prototype.handleSelectPhotosChanges = function handleSelectPhotosChanges() {\n    var _this4 = this;\n\n    this.fileInput.addEventListener('change', function (event) {\n\n      // Get the selected files from the input element\n      var photos = event.target.files;\n      _this4.setState({ photos: photos });\n    });\n  };\n\n  SubmitListing.prototype.handleSave = function handleSave(event) {\n    var _this5 = this;\n\n    event.preventDefault();\n    event.persist();\n    this.setState({ isLoading: true }, function () {\n\n      return _this5.handleUpload(event);\n    });\n  };\n\n  SubmitListing.prototype.render = function render() {\n    var _this6 = this;\n\n    var stateOptions = [{ key: 'fl', value: 'Florida', text: 'Florida' }];\n    var amenityOptions = [{ key: 'cable', value: 'cable', text: 'Cable' }, { key: 'electricity', value: 'electricity', text: 'Electricity' }, { key: 'internet', value: 'internet', text: 'Internet' }, { key: 'water', value: 'water', text: 'Water' }];\n    var typeOptions = [{ key: 'marina', value: 'marina', text: 'Marina' }, { key: 'rack', value: 'rack', text: 'Rack' }, { key: 'trailer', value: 'trailer', text: 'Trailer' }];\n\n    return __WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement(\n      'div',\n      null,\n      __WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement(\n        __WEBPACK_IMPORTED_MODULE_6_semantic_ui_react__[\"Segment\"],\n        { as: __WEBPACK_IMPORTED_MODULE_6_semantic_ui_react__[\"Form\"] },\n        __WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement('input', { multiple: true,\n          type: 'file',\n          style: { display: 'none' },\n          ref: function ref(input) {\n\n            _this6.fileInput = input;\n          }\n        }),\n        __WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement(\n          __WEBPACK_IMPORTED_MODULE_6_semantic_ui_react__[\"Form\"].Group,\n          null,\n          __WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement(\n            __WEBPACK_IMPORTED_MODULE_6_semantic_ui_react__[\"Form\"].Field,\n            { error: this.hasValidationError('type'), width: '4' },\n            __WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement(\n              'label',\n              null,\n              'Type'\n            ),\n            __WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_6_semantic_ui_react__[\"Dropdown\"], { fluid: true, search: true, selection: true,\n              placeholder: 'Type',\n              options: typeOptions,\n              name: 'type',\n              onChange: this.handleTypeChange,\n              value: this.state.listing.type\n            })\n          ),\n          __WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement(\n            __WEBPACK_IMPORTED_MODULE_6_semantic_ui_react__[\"Form\"].Field,\n            { error: this.hasValidationError('city'), width: '7' },\n            __WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement(\n              'label',\n              null,\n              'City'\n            ),\n            __WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_6_semantic_ui_react__[\"Input\"], {\n              name: 'city',\n              onChange: this.handleChange,\n              placeholder: 'City',\n              type: 'text',\n              value: this.state.listing.city\n            })\n          ),\n          __WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement(\n            __WEBPACK_IMPORTED_MODULE_6_semantic_ui_react__[\"Form\"].Field,\n            { error: this.hasValidationError('state'), width: '5' },\n            __WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement(\n              'label',\n              null,\n              'State'\n            ),\n            __WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_6_semantic_ui_react__[\"Dropdown\"], { fluid: true, search: true, selection: true,\n              placeholder: 'State',\n              options: stateOptions,\n              name: 'state',\n              onChange: this.handleStateChange,\n              value: this.state.listing.state\n            })\n          )\n        ),\n        __WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement(\n          __WEBPACK_IMPORTED_MODULE_6_semantic_ui_react__[\"Form\"].Field,\n          { error: this.hasValidationError('amenities') },\n          __WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement(\n            'label',\n            null,\n            'Amenities'\n          ),\n          __WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_6_semantic_ui_react__[\"Dropdown\"], { fluid: true, search: true, selection: true, multiple: true,\n            placeholder: 'Amenities',\n            options: amenityOptions,\n            name: 'state',\n            onChange: this.handleAmenityChange,\n            value: this.state.listing.amenities\n          })\n        ),\n        __WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement(\n          __WEBPACK_IMPORTED_MODULE_6_semantic_ui_react__[\"Form\"].Field,\n          { error: this.hasValidationError('description') },\n          __WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement(\n            'label',\n            null,\n            'Description'\n          ),\n          __WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_6_semantic_ui_react__[\"TextArea\"], {\n            name: 'description',\n            onChange: this.handleChange,\n            placeholder: 'Description',\n            type: 'text',\n            value: this.state.listing.description\n          })\n        ),\n        __WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement(\n          __WEBPACK_IMPORTED_MODULE_6_semantic_ui_react__[\"Divider\"],\n          { horizontal: true },\n          __WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_6_semantic_ui_react__[\"Icon\"], { circular: true,\n            name: 'photo',\n            color: 'blue'\n          })\n        ),\n        __WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_6_semantic_ui_react__[\"Button\"], { fluid: true,\n          content: 'Select Photos (' + this.state.photos.length + ')',\n          onClick: this.handleSelectPhotos\n        })\n      ),\n      __WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement(\n        __WEBPACK_IMPORTED_MODULE_6_semantic_ui_react__[\"Segment\"],\n        null,\n        __WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_6_semantic_ui_react__[\"Button\"], { fluid: true, primary: true,\n          disabled: this.state.isLoading,\n          loading: this.state.isLoading,\n          onClick: this.handleContinue,\n          icon: 'right arrow',\n          labelPosition: 'right',\n          content: 'Continue'\n        })\n      )\n    );\n  };\n\n  return SubmitListing;\n}(__WEBPACK_IMPORTED_MODULE_1_react___default.a.Component), _class2.propTypes = {\n  dispatch: __WEBPACK_IMPORTED_MODULE_1_react__[\"PropTypes\"].func,\n  error: __WEBPACK_IMPORTED_MODULE_1_react__[\"PropTypes\"].object,\n  actions: __WEBPACK_IMPORTED_MODULE_1_react__[\"PropTypes\"].object.isRequired,\n  auth: __WEBPACK_IMPORTED_MODULE_1_react__[\"PropTypes\"].object.isRequired,\n  setActiveStep: __WEBPACK_IMPORTED_MODULE_1_react__[\"PropTypes\"].func.isRequired,\n  setCompletedStep: __WEBPACK_IMPORTED_MODULE_1_react__[\"PropTypes\"].func.isRequired,\n  steps: __WEBPACK_IMPORTED_MODULE_1_react__[\"PropTypes\"].object.isRequired\n}, _temp)) || _class);\n\n\n/***/ }),\n\n/***/ 1311:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar hasOwn = Object.prototype.hasOwnProperty;\nvar toStr = Object.prototype.toString;\n\nvar isArray = function isArray(arr) {\n\tif (typeof Array.isArray === 'function') {\n\t\treturn Array.isArray(arr);\n\t}\n\n\treturn toStr.call(arr) === '[object Array]';\n};\n\nvar isPlainObject = function isPlainObject(obj) {\n\tif (!obj || toStr.call(obj) !== '[object Object]') {\n\t\treturn false;\n\t}\n\n\tvar hasOwnConstructor = hasOwn.call(obj, 'constructor');\n\tvar hasIsPrototypeOf = obj.constructor && obj.constructor.prototype && hasOwn.call(obj.constructor.prototype, 'isPrototypeOf');\n\t// Not own constructor property must be Object\n\tif (obj.constructor && !hasOwnConstructor && !hasIsPrototypeOf) {\n\t\treturn false;\n\t}\n\n\t// Own properties are enumerated firstly, so to speed up,\n\t// if last one is own, then all properties are own.\n\tvar key;\n\tfor (key in obj) {/**/}\n\n\treturn typeof key === 'undefined' || hasOwn.call(obj, key);\n};\n\nmodule.exports = function extend() {\n\tvar options, name, src, copy, copyIsArray, clone,\n\t\ttarget = arguments[0],\n\t\ti = 1,\n\t\tlength = arguments.length,\n\t\tdeep = false;\n\n\t// Handle a deep copy situation\n\tif (typeof target === 'boolean') {\n\t\tdeep = target;\n\t\ttarget = arguments[1] || {};\n\t\t// skip the boolean and the target\n\t\ti = 2;\n\t} else if ((typeof target !== 'object' && typeof target !== 'function') || target == null) {\n\t\ttarget = {};\n\t}\n\n\tfor (; i < length; ++i) {\n\t\toptions = arguments[i];\n\t\t// Only deal with non-null/undefined values\n\t\tif (options != null) {\n\t\t\t// Extend the base object\n\t\t\tfor (name in options) {\n\t\t\t\tsrc = target[name];\n\t\t\t\tcopy = options[name];\n\n\t\t\t\t// Prevent never-ending loop\n\t\t\t\tif (target !== copy) {\n\t\t\t\t\t// Recurse if we're merging plain objects or arrays\n\t\t\t\t\tif (deep && copy && (isPlainObject(copy) || (copyIsArray = isArray(copy)))) {\n\t\t\t\t\t\tif (copyIsArray) {\n\t\t\t\t\t\t\tcopyIsArray = false;\n\t\t\t\t\t\t\tclone = src && isArray(src) ? src : [];\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tclone = src && isPlainObject(src) ? src : {};\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Never move original objects, clone them\n\t\t\t\t\t\ttarget[name] = extend(deep, clone, copy);\n\n\t\t\t\t\t// Don't bring in undefined values\n\t\t\t\t\t} else if (typeof copy !== 'undefined') {\n\t\t\t\t\t\ttarget[name] = copy;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Return the modified object\n\treturn target;\n};\n\n\n\n/***/ }),\n\n/***/ 1318:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_RESULT__;// Copyright 2014 Simon Lydell\r\n// X11 (“MIT”) Licensed. (See LICENSE.)\r\n\r\nvoid (function(root, factory) {\r\n  if (true) {\r\n    !(__WEBPACK_AMD_DEFINE_FACTORY__ = (factory),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\n\t\t\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.call(exports, __webpack_require__, exports, module)) :\n\t\t\t\t__WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__))\r\n  } else if (typeof exports === \"object\") {\r\n    module.exports = factory()\r\n  } else {\r\n    root.resolveUrl = factory()\r\n  }\r\n}(this, function() {\r\n\r\n  function resolveUrl(/* ...urls */) {\r\n    var numUrls = arguments.length\r\n\r\n    if (numUrls === 0) {\r\n      throw new Error(\"resolveUrl requires at least one argument; got none.\")\r\n    }\r\n\r\n    var base = document.createElement(\"base\")\r\n    base.href = arguments[0]\r\n\r\n    if (numUrls === 1) {\r\n      return base.href\r\n    }\r\n\r\n    var head = document.getElementsByTagName(\"head\")[0]\r\n    head.insertBefore(base, head.firstChild)\r\n\r\n    var a = document.createElement(\"a\")\r\n    var resolved\r\n\r\n    for (var index = 1; index < numUrls; index++) {\r\n      a.href = arguments[index]\r\n      resolved = a.href\r\n      base.href = resolved\r\n    }\r\n\r\n    head.removeChild(base)\r\n\r\n    return resolved\r\n  }\r\n\r\n  return resolveUrl\r\n\r\n}));\r\n\n\n/***/ }),\n\n/***/ 1319:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n// Generated by Babel\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.encode = encode;\n/* global: window */\n\nvar _window = window;\nvar btoa = _window.btoa;\nfunction encode(data) {\n  return btoa(unescape(encodeURIComponent(data)));\n}\n\nvar isSupported = exports.isSupported = \"btoa\" in window;\n\n/***/ }),\n\n/***/ 1320:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n// Generated by Babel\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.newRequest = newRequest;\nexports.resolveUrl = resolveUrl;\n\nvar _resolveUrl = __webpack_require__(1318);\n\nvar _resolveUrl2 = _interopRequireDefault(_resolveUrl);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction newRequest() {\n  return new window.XMLHttpRequest();\n} /* global window */\n\n\nfunction resolveUrl(origin, link) {\n  return (0, _resolveUrl2.default)(origin, link);\n}\n\n/***/ }),\n\n/***/ 1321:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n// Generated by Babel\n\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getSource = getSource;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar FileSource = function () {\n  function FileSource(file) {\n    _classCallCheck(this, FileSource);\n\n    this._file = file;\n    this.size = file.size;\n  }\n\n  _createClass(FileSource, [{\n    key: \"slice\",\n    value: function slice(start, end) {\n      return this._file.slice(start, end);\n    }\n  }, {\n    key: \"close\",\n    value: function close() {}\n  }]);\n\n  return FileSource;\n}();\n\nfunction getSource(input) {\n  // Since we emulate the Blob type in our tests (not all target browsers\n  // support it), we cannot use `instanceof` for testing whether the input value\n  // can be handled. Instead, we simply check is the slice() function and the\n  // size property are available.\n  if (typeof input.slice === \"function\" && typeof input.size !== \"undefined\") {\n    return new FileSource(input);\n  }\n\n  throw new Error(\"source object may only be an instance of File or Blob in this environment\");\n}\n\n/***/ }),\n\n/***/ 1322:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n// Generated by Babel\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar DetailedError = function (_Error) {\n  _inherits(DetailedError, _Error);\n\n  function DetailedError(error) {\n    var causingErr = arguments.length <= 1 || arguments[1] === undefined ? null : arguments[1];\n    var xhr = arguments.length <= 2 || arguments[2] === undefined ? null : arguments[2];\n\n    _classCallCheck(this, DetailedError);\n\n    var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(DetailedError).call(this, error.message));\n\n    _this.originalRequest = xhr;\n    _this.causingError = causingErr;\n\n    var message = error.message;\n    if (causingErr != null) {\n      message += \", caused by \" + causingErr.toString();\n    }\n    if (xhr != null) {\n      message += \", originated from request (response code: \" + xhr.status + \", response text: \" + xhr.responseText + \")\";\n    }\n    _this.message = message;\n    return _this;\n  }\n\n  return DetailedError;\n}(Error);\n\nexports.default = DetailedError;\n\n/***/ }),\n\n/***/ 1323:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n// Generated by Babel\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = fingerprint;\n/**\n * Generate a fingerprint for a file which will be used the store the endpoint\n *\n * @param {File} file\n * @return {String}\n */\nfunction fingerprint(file) {\n  return [\"tus\", file.name, file.type, file.size, file.lastModified].join(\"-\");\n}\n\n/***/ }),\n\n/***/ 1324:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n// Generated by Babel\n\n\nvar _upload = __webpack_require__(1325);\n\nvar _upload2 = _interopRequireDefault(_upload);\n\nvar _storage = __webpack_require__(1304);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/* global window */\nvar defaultOptions = _upload2.default.defaultOptions;\n\n\nif (typeof window !== \"undefined\") {\n  // Browser environment using XMLHttpRequest\n  var _window = window;\n  var XMLHttpRequest = _window.XMLHttpRequest;\n  var Blob = _window.Blob;\n\n\n  var isSupported = XMLHttpRequest && Blob && typeof Blob.prototype.slice === \"function\";\n} else {\n  // Node.js environment using http module\n  var isSupported = true;\n}\n\n// The usage of the commonjs exporting syntax instead of the new ECMAScript\n// one is actually inteded and prevents weird behaviour if we are trying to\n// import this module in another module using Babel.\nmodule.exports = {\n  Upload: _upload2.default,\n  isSupported: isSupported,\n  canStoreURLs: _storage.canStoreURLs,\n  defaultOptions: defaultOptions\n};\n\n/***/ }),\n\n/***/ 1325:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n// Generated by Babel\n\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /* global window */\n\n\n// We import the files used inside the Node environment which are rewritten\n// for browsers using the rules defined in the package.json\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _fingerprint = __webpack_require__(1323);\n\nvar _fingerprint2 = _interopRequireDefault(_fingerprint);\n\nvar _error = __webpack_require__(1322);\n\nvar _error2 = _interopRequireDefault(_error);\n\nvar _extend = __webpack_require__(1311);\n\nvar _extend2 = _interopRequireDefault(_extend);\n\nvar _request = __webpack_require__(1320);\n\nvar _source = __webpack_require__(1321);\n\nvar _base = __webpack_require__(1319);\n\nvar Base64 = _interopRequireWildcard(_base);\n\nvar _storage = __webpack_require__(1304);\n\nvar Storage = _interopRequireWildcard(_storage);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar defaultOptions = {\n  endpoint: \"\",\n  fingerprint: _fingerprint2.default,\n  resume: true,\n  onProgress: null,\n  onChunkComplete: null,\n  onSuccess: null,\n  onError: null,\n  headers: {},\n  chunkSize: Infinity,\n  withCredentials: false,\n  uploadUrl: null,\n  uploadSize: null,\n  overridePatchMethod: false,\n  retryDelays: null\n};\n\nvar Upload = function () {\n  function Upload(file, options) {\n    _classCallCheck(this, Upload);\n\n    this.options = (0, _extend2.default)(true, {}, defaultOptions, options);\n\n    // The underlying File/Blob object\n    this.file = file;\n\n    // The URL against which the file will be uploaded\n    this.url = null;\n\n    // The underlying XHR object for the current PATCH request\n    this._xhr = null;\n\n    // The fingerpinrt for the current file (set after start())\n    this._fingerprint = null;\n\n    // The offset used in the current PATCH request\n    this._offset = null;\n\n    // True if the current PATCH request has been aborted\n    this._aborted = false;\n\n    // The file's size in bytes\n    this._size = null;\n\n    // The Source object which will wrap around the given file and provides us\n    // with a unified interface for getting its size and slice chunks from its\n    // content allowing us to easily handle Files, Blobs, Buffers and Streams.\n    this._source = null;\n\n    // The current count of attempts which have been made. Null indicates none.\n    this._retryAttempt = 0;\n\n    // The timeout's ID which is used to delay the next retry\n    this._retryTimeout = null;\n\n    // The offset of the remote upload before the latest attempt was started.\n    this._offsetBeforeRetry = 0;\n  }\n\n  _createClass(Upload, [{\n    key: \"start\",\n    value: function start() {\n      var _this = this;\n\n      var file = this.file;\n\n      if (!file) {\n        this._emitError(new Error(\"tus: no file or stream to upload provided\"));\n        return;\n      }\n\n      if (!this.options.endpoint) {\n        this._emitError(new Error(\"tus: no endpoint provided\"));\n        return;\n      }\n\n      var source = this._source = (0, _source.getSource)(file, this.options.chunkSize);\n\n      // Firstly, check if the caller has supplied a manual upload size or else\n      // we will use the calculated size by the source object.\n      if (this.options.uploadSize != null) {\n        var size = +this.options.uploadSize;\n        if (isNaN(size)) {\n          throw new Error(\"tus: cannot convert `uploadSize` option into a number\");\n        }\n\n        this._size = size;\n      } else {\n        var size = source.size;\n\n        // The size property will be null if we cannot calculate the file's size,\n        // for example if you handle a stream.\n        if (size == null) {\n          throw new Error(\"tus: cannot automatically derive upload's size from input and must be specified manually using the `uploadSize` option\");\n        }\n\n        this._size = size;\n      }\n\n      var retryDelays = this.options.retryDelays;\n      if (retryDelays != null) {\n        if (Object.prototype.toString.call(retryDelays) !== \"[object Array]\") {\n          throw new Error(\"tus: the `retryDelays` option must either be an array or null\");\n        } else {\n          (function () {\n            var errorCallback = _this.options.onError;\n            _this.options.onError = function (err) {\n              // Restore the original error callback which may have been set.\n              _this.options.onError = errorCallback;\n\n              // We will reset the attempt counter if\n              // - we were already able to connect to the server (offset != null) and\n              // - we were able to upload a small chunk of data to the server\n              var shouldResetDelays = _this._offset != null && _this._offset > _this._offsetBeforeRetry;\n              if (shouldResetDelays) {\n                _this._retryAttempt = 0;\n              }\n\n              var isOnline = true;\n              if (typeof window !== \"undefined\" && \"navigator\" in window && window.navigator.onLine === false) {\n                isOnline = false;\n              }\n\n              // We only attempt a retry if\n              // - we didn't exceed the maxium number of retries, yet, and\n              // - this error was caused by a request or it's response and\n              // - the browser does not indicate that we are offline\n              var shouldRetry = _this._retryAttempt < retryDelays.length && err.originalRequest != null && isOnline;\n\n              if (!shouldRetry) {\n                _this._emitError(err);\n                return;\n              }\n\n              var delay = retryDelays[_this._retryAttempt++];\n\n              _this._offsetBeforeRetry = _this._offset;\n              _this.options.uploadUrl = _this.url;\n\n              _this._retryTimeout = setTimeout(function () {\n                _this.start();\n              }, delay);\n            };\n          })();\n        }\n      }\n\n      // A URL has manually been specified, so we try to resume\n      if (this.options.uploadUrl != null) {\n        this.url = this.options.uploadUrl;\n        this._resumeUpload();\n        return;\n      }\n\n      // Try to find the endpoint for the file in the storage\n      if (this.options.resume) {\n        this._fingerprint = this.options.fingerprint(file);\n        var resumedUrl = Storage.getItem(this._fingerprint);\n\n        if (resumedUrl != null) {\n          this.url = resumedUrl;\n          this._resumeUpload();\n          return;\n        }\n      }\n\n      // An upload has not started for the file yet, so we start a new one\n      this._createUpload();\n    }\n  }, {\n    key: \"abort\",\n    value: function abort() {\n      if (this._xhr !== null) {\n        this._xhr.abort();\n        this._source.close();\n        this._aborted = true;\n      }\n\n      if (this._retryTimeout != null) {\n        clearTimeout(this._retryTimeout);\n        this._retryTimeout = null;\n      }\n    }\n  }, {\n    key: \"_emitXhrError\",\n    value: function _emitXhrError(xhr, err, causingErr) {\n      this._emitError(new _error2.default(err, causingErr, xhr));\n    }\n  }, {\n    key: \"_emitError\",\n    value: function _emitError(err) {\n      if (typeof this.options.onError === \"function\") {\n        this.options.onError(err);\n      } else {\n        throw err;\n      }\n    }\n  }, {\n    key: \"_emitSuccess\",\n    value: function _emitSuccess() {\n      if (typeof this.options.onSuccess === \"function\") {\n        this.options.onSuccess();\n      }\n    }\n\n    /**\n     * Publishes notification when data has been sent to the server. This\n     * data may not have been accepted by the server yet.\n     * @param  {number} bytesSent  Number of bytes sent to the server.\n     * @param  {number} bytesTotal Total number of bytes to be sent to the server.\n     */\n\n  }, {\n    key: \"_emitProgress\",\n    value: function _emitProgress(bytesSent, bytesTotal) {\n      if (typeof this.options.onProgress === \"function\") {\n        this.options.onProgress(bytesSent, bytesTotal);\n      }\n    }\n\n    /**\n     * Publishes notification when a chunk of data has been sent to the server\n     * and accepted by the server.\n     * @param  {number} chunkSize  Size of the chunk that was accepted by the\n     *                             server.\n     * @param  {number} bytesAccepted Total number of bytes that have been\n     *                                accepted by the server.\n     * @param  {number} bytesTotal Total number of bytes to be sent to the server.\n     */\n\n  }, {\n    key: \"_emitChunkComplete\",\n    value: function _emitChunkComplete(chunkSize, bytesAccepted, bytesTotal) {\n      if (typeof this.options.onChunkComplete === \"function\") {\n        this.options.onChunkComplete(chunkSize, bytesAccepted, bytesTotal);\n      }\n    }\n\n    /**\n     * Set the headers used in the request and the withCredentials property\n     * as defined in the options\n     *\n     * @param {XMLHttpRequest} xhr\n     */\n\n  }, {\n    key: \"_setupXHR\",\n    value: function _setupXHR(xhr) {\n      xhr.setRequestHeader(\"Tus-Resumable\", \"1.0.0\");\n      var headers = this.options.headers;\n\n      for (var name in headers) {\n        xhr.setRequestHeader(name, headers[name]);\n      }\n\n      xhr.withCredentials = this.options.withCredentials;\n    }\n\n    /**\n     * Create a new upload using the creation extension by sending a POST\n     * request to the endpoint. After successful creation the file will be\n     * uploaded\n     *\n     * @api private\n     */\n\n  }, {\n    key: \"_createUpload\",\n    value: function _createUpload() {\n      var _this2 = this;\n\n      var xhr = (0, _request.newRequest)();\n      xhr.open(\"POST\", this.options.endpoint, true);\n\n      xhr.onload = function () {\n        if (!(xhr.status >= 200 && xhr.status < 300)) {\n          _this2._emitXhrError(xhr, new Error(\"tus: unexpected response while creating upload\"));\n          return;\n        }\n\n        _this2.url = (0, _request.resolveUrl)(_this2.options.endpoint, xhr.getResponseHeader(\"Location\"));\n\n        if (_this2.options.resume) {\n          Storage.setItem(_this2._fingerprint, _this2.url);\n        }\n\n        _this2._offset = 0;\n        _this2._startUpload();\n      };\n\n      xhr.onerror = function (err) {\n        _this2._emitXhrError(xhr, new Error(\"tus: failed to create upload\"), err);\n      };\n\n      this._setupXHR(xhr);\n      xhr.setRequestHeader(\"Upload-Length\", this._size);\n\n      // Add metadata if values have been added\n      var metadata = encodeMetadata(this.options.metadata);\n      if (metadata !== \"\") {\n        xhr.setRequestHeader(\"Upload-Metadata\", metadata);\n      }\n\n      xhr.send(null);\n    }\n\n    /*\n     * Try to resume an existing upload. First a HEAD request will be sent\n     * to retrieve the offset. If the request fails a new upload will be\n     * created. In the case of a successful response the file will be uploaded.\n     *\n     * @api private\n     */\n\n  }, {\n    key: \"_resumeUpload\",\n    value: function _resumeUpload() {\n      var _this3 = this;\n\n      var xhr = (0, _request.newRequest)();\n      xhr.open(\"HEAD\", this.url, true);\n\n      xhr.onload = function () {\n        if (!(xhr.status >= 200 && xhr.status < 300)) {\n          if (_this3.options.resume) {\n            // Remove stored fingerprint and corresponding endpoint,\n            // since the file can not be found\n            Storage.removeItem(_this3._fingerprint);\n          }\n\n          // Try to create a new upload\n          _this3.url = null;\n          _this3._createUpload();\n          return;\n        }\n\n        var offset = parseInt(xhr.getResponseHeader(\"Upload-Offset\"), 10);\n        if (isNaN(offset)) {\n          _this3._emitXhrError(xhr, new Error(\"tus: invalid or missing offset value\"));\n          return;\n        }\n\n        var length = parseInt(xhr.getResponseHeader(\"Upload-Length\"), 10);\n        if (isNaN(length)) {\n          _this3._emitXhrError(xhr, new Error(\"tus: invalid or missing length value\"));\n          return;\n        }\n\n        // Upload has already been completed and we do not need to send additional\n        // data to the server\n        if (offset === length) {\n          _this3._emitProgress(length, length);\n          _this3._emitSuccess();\n          return;\n        }\n\n        _this3._offset = offset;\n        _this3._startUpload();\n      };\n\n      xhr.onerror = function (err) {\n        _this3._emitXhrError(xhr, new Error(\"tus: failed to resume upload\"), err);\n      };\n\n      this._setupXHR(xhr);\n      xhr.send(null);\n    }\n\n    /**\n     * Start uploading the file using PATCH requests. The file will be divided\n     * into chunks as specified in the chunkSize option. During the upload\n     * the onProgress event handler may be invoked multiple times.\n     *\n     * @api private\n     */\n\n  }, {\n    key: \"_startUpload\",\n    value: function _startUpload() {\n      var _this4 = this;\n\n      var xhr = this._xhr = (0, _request.newRequest)();\n\n      // Some browser and servers may not support the PATCH method. For those\n      // cases, you can tell tus-js-client to use a POST request with the\n      // X-HTTP-Method-Override header for simulating a PATCH request.\n      if (this.options.overridePatchMethod) {\n        xhr.open(\"POST\", this.url, true);\n        xhr.setRequestHeader(\"X-HTTP-Method-Override\", \"PATCH\");\n      } else {\n        xhr.open(\"PATCH\", this.url, true);\n      }\n\n      xhr.onload = function () {\n        if (!(xhr.status >= 200 && xhr.status < 300)) {\n          _this4._emitXhrError(xhr, new Error(\"tus: unexpected response while uploading chunk\"));\n          return;\n        }\n\n        var offset = parseInt(xhr.getResponseHeader(\"Upload-Offset\"), 10);\n        if (isNaN(offset)) {\n          _this4._emitXhrError(xhr, new Error(\"tus: invalid or missing offset value\"));\n          return;\n        }\n\n        _this4._emitProgress(offset, _this4._size);\n        _this4._emitChunkComplete(offset - _this4._offset, offset, _this4._size);\n\n        _this4._offset = offset;\n\n        if (offset == _this4._size) {\n          // Yay, finally done :)\n          _this4._emitSuccess();\n          _this4._source.close();\n          return;\n        }\n\n        _this4._startUpload();\n      };\n\n      xhr.onerror = function (err) {\n        // Don't emit an error if the upload was aborted manually\n        if (_this4._aborted) {\n          return;\n        }\n\n        _this4._emitXhrError(xhr, new Error(\"tus: failed to upload chunk at offset \" + _this4._offset), err);\n      };\n\n      // Test support for progress events before attaching an event listener\n      if (\"upload\" in xhr) {\n        xhr.upload.onprogress = function (e) {\n          if (!e.lengthComputable) {\n            return;\n          }\n\n          _this4._emitProgress(start + e.loaded, _this4._size);\n        };\n      }\n\n      this._setupXHR(xhr);\n\n      xhr.setRequestHeader(\"Upload-Offset\", this._offset);\n      xhr.setRequestHeader(\"Content-Type\", \"application/offset+octet-stream\");\n\n      var start = this._offset;\n      var end = this._offset + this.options.chunkSize;\n\n      // The specified chunkSize may be Infinity or the calcluated end position\n      // may exceed the file's size. In both cases, we limit the end position to\n      // the input's total size for simpler calculations and correctness.\n      if (end === Infinity || end > this._size) {\n        end = this._size;\n      }\n\n      xhr.send(this._source.slice(start, end));\n    }\n  }]);\n\n  return Upload;\n}();\n\nfunction encodeMetadata(metadata) {\n  if (!Base64.isSupported) {\n    return \"\";\n  }\n\n  var encoded = [];\n\n  for (var key in metadata) {\n    encoded.push(key + \" \" + Base64.encode(metadata[key]));\n  }\n\n  return encoded.join(\",\");\n}\n\nUpload.defaultOptions = defaultOptions;\n\nexports.default = Upload;\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// 61e2501daf602d947829/9.js","// Generated by Babel\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.setItem = setItem;\nexports.getItem = getItem;\nexports.removeItem = removeItem;\n/* global window, localStorage */\n\nvar hasStorage = false;\ntry {\n  hasStorage = \"localStorage\" in window;\n\n  // Attempt to store and read entries from the local storage to detect Private\n  // Mode on Safari on iOS (see #49)\n  var key = \"tusSupport\";\n  localStorage.setItem(key, localStorage.getItem(key));\n} catch (e) {\n  // If we try to access localStorage inside a sandboxed iframe, a SecurityError\n  // is thrown. When in private mode on iOS Safari, a QuotaExceededError is\n  // thrown (see #49)\n  if (e.code === e.SECURITY_ERR || e.code === e.QUOTA_EXCEEDED_ERR) {\n    hasStorage = false;\n  } else {\n    throw e;\n  }\n}\n\nvar canStoreURLs = exports.canStoreURLs = hasStorage;\n\nfunction setItem(key, value) {\n  if (!hasStorage) return;\n  return localStorage.setItem(key, value);\n}\n\nfunction getItem(key) {\n  if (!hasStorage) return;\n  return localStorage.getItem(key);\n}\n\nfunction removeItem(key) {\n  if (!hasStorage) return;\n  return localStorage.removeItem(key);\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/tus-js-client/lib.es5/browser/storage.js\n// module id = 1304\n// module chunks = 9","import get from 'lodash/get';\nimport React, { PropTypes } from 'react';\nimport { connect } from 'react-redux';\nimport { push } from 'react-router-redux';\nimport { bindActionCreators } from 'redux';\nimport * as actionCreators from 'actions';\nimport { Button, Divider, Dropdown, Form, Icon, Input, Segment, TextArea } from 'semantic-ui-react';\nimport { NProgress } from 'components';\nimport tus from 'tus-js-client';\n\nconst mapStateToProps = (state) => ({\n  auth: state.auth,\n  error: state.listings.error\n});\nconst mapDispatchToProps = (dispatch) => ({\n  dispatch,\n  actions: {\n    alert: bindActionCreators(actionCreators.alert, dispatch),\n    listings: bindActionCreators(actionCreators.listings, dispatch),\n    uploads: bindActionCreators(actionCreators.uploads, dispatch)\n  }\n});\n\n@connect(mapStateToProps, mapDispatchToProps)\nexport default class SubmitListing extends React.Component {\n  static propTypes = {\n    dispatch: PropTypes.func,\n    error: PropTypes.object,\n    actions: PropTypes.object.isRequired,\n    auth: PropTypes.object.isRequired,\n    setActiveStep: PropTypes.func.isRequired,\n    setCompletedStep: PropTypes.func.isRequired,\n    steps: PropTypes.object.isRequired\n  };\n  state = {\n    isLoading: true,\n    photos: [],\n    listing: {\n      amenities: [],\n      city: '',\n      description: '',\n      state: '',\n      type: ''\n    }\n  };\n  constructor(props) {\n\n    super(props);\n    this.handleChange = this.handleChange.bind(this);\n    this.handleContinue = this.handleContinue.bind(this);\n    this.handleStateChange = this.handleStateChange.bind(this);\n    this.handleAmenityChange = this.handleAmenityChange.bind(this);\n    this.handleTypeChange = this.handleTypeChange.bind(this);\n    this.handleSave = this.handleSave.bind(this);\n    this.handleSelectPhotos = this.handleSelectPhotos.bind(this);\n  }\n  componentWillMount() {\n\n    if (!this.props.auth.user) {\n      return this.props.dispatch(push('/submit'));\n    }\n    this.setState({ isLoading: false });\n    this.props.setActiveStep('listing');\n  }\n  componentWillUnmount() {\n\n    this.props.setActiveStep(false);\n  }\n  componentDidMount() {\n\n    this.handleSelectPhotosChanges();\n    NProgress.done();\n  }\n  hasValidationError(validationKey) {\n\n    return (get(this.props.error, 'validation.keys') && this.props.error.validation.keys.includes(validationKey)) ? true : false;\n  }\n  handleContinue(event) {\n\n    event.preventDefault();\n    this.setState({ isLoading: true }, () => {\n\n      const { listing } = this.state;\n      this.props.actions.listings.create({ ...listing })\n        .then((response) => {\n\n          this.setState({ listing: { ...response.payload.listing } });\n          this.handleSave(event);\n        })\n        .catch((error) => {\n\n          this.setState({ isLoading: false });\n          this.props.actions.alert.error(error.message);\n        });\n    });\n  }\n  handleChange(event) {\n\n    const { listing } = this.state;\n    listing[event.target.name] = event.target.value;\n    this.setState({ listing });\n  }\n  handleStateChange(event, data) {\n\n    this.setState({ listing: { ...this.state.listing, state: data.value } });\n  }\n  handleAmenityChange(event, data) {\n\n    this.setState({ listing: { ...this.state.listing, amenities: data.value } });\n  }\n  handleTypeChange(event, data) {\n\n    this.setState({ listing: { ...this.state.listing, type: data.value } });\n  }\n  componentDidMount() {\n\n    this.handleSelectPhotosChanges();\n  }\n  handleUpload(event) {\n\n    const files = this.fileInput.files;\n    // Get the selected upload(s) from the input element.\n    for (const file of files) {\n      // Create a new tus upload\n      const upload = new tus.Upload(file, {\n        endpoint: '/api/uploads',\n        headers: {\n          // Authorization: ['Bearer', getAuthenticationToken()].join(' ')\n        },\n        onError: (error) => {\n\n          this.setState({ isLoading: false }, () => this.props.actions.alert.error(error));\n          NProgress.done();\n        },\n        onProgress: (bytesUploaded, bytesTotal) => {\n\n          const percentage = (bytesUploaded / bytesTotal * 100).toFixed(2);\n          NProgress.set(percentage / 100);\n        },\n        onSuccess: () => {\n\n          const id = new RegExp('.*/uploads/(.*)$').exec(upload.url)[1];\n          this.props.actions.uploads.update({ id, listingId: this.state.listing.id })\n            .then((response) => {\n\n              this.props.setCompletedStep('listing');\n              this.props.dispatch(push('/submit/billing'));\n            })\n            .catch((error) => this.props.actions.alert.error(error.message));\n        }\n      });\n      // Start the upload\n      upload.start();\n    }\n  }\n  handleSelectPhotos(event) {\n\n    event.preventDefault();\n    this.fileInput.click();\n  }\n  handleSelectPhotosChanges() {\n\n    this.fileInput.addEventListener('change', (event) => {\n\n      // Get the selected files from the input element\n      const photos = event.target.files;\n      this.setState({ photos });\n    });\n  }\n  handleSave(event) {\n\n    event.preventDefault();\n    event.persist();\n    this.setState({ isLoading: true }, () => {\n\n      return this.handleUpload(event);\n    });\n  }\n  render() {\n\n    const stateOptions = [{ key: 'fl', value: 'Florida', text: 'Florida' }];\n    const amenityOptions = [\n      { key: 'cable', value: 'cable', text: 'Cable' },\n      { key: 'electricity', value: 'electricity', text: 'Electricity' },\n      { key: 'internet', value: 'internet', text: 'Internet' },\n      { key: 'water', value: 'water', text: 'Water' }\n    ];\n    const typeOptions = [\n      { key: 'marina', value: 'marina', text: 'Marina' },\n      { key: 'rack', value: 'rack', text: 'Rack' },\n      { key: 'trailer', value: 'trailer', text: 'Trailer' }\n    ];\n\n    return (\n      <div>\n        <Segment as={Form}>\n          <input multiple\n            type='file'\n            style={{ display: 'none' }}\n            ref={(input) => {\n\n              this.fileInput = input;\n            }}\n          />\n          <Form.Group>\n            <Form.Field error={this.hasValidationError('type')} width='4'>\n              <label>Type</label>\n              <Dropdown fluid search selection\n                placeholder='Type'\n                options={typeOptions}\n                name=\"type\"\n                onChange={this.handleTypeChange}\n                value={this.state.listing.type}\n              />\n            </Form.Field>\n            <Form.Field error={this.hasValidationError('city')} width='7'>\n              <label>City</label>\n              <Input\n                name=\"city\"\n                onChange={this.handleChange}\n                placeholder='City'\n                type=\"text\"\n                value={this.state.listing.city}\n              />\n            </Form.Field>\n            <Form.Field error={this.hasValidationError('state')} width='5'>\n              <label>State</label>\n              <Dropdown fluid search selection\n                placeholder='State'\n                options={stateOptions}\n                name=\"state\"\n                onChange={this.handleStateChange}\n                value={this.state.listing.state}\n              />\n            </Form.Field>\n          </Form.Group>\n          <Form.Field error={this.hasValidationError('amenities')}>\n            <label>Amenities</label>\n            <Dropdown fluid search selection multiple\n              placeholder='Amenities'\n              options={amenityOptions}\n              name=\"state\"\n              onChange={this.handleAmenityChange}\n              value={this.state.listing.amenities}\n            />\n          </Form.Field>\n          <Form.Field error={this.hasValidationError('description')}>\n            <label>Description</label>\n            <TextArea\n              name=\"description\"\n              onChange={this.handleChange}\n              placeholder='Description'\n              type=\"text\"\n              value={this.state.listing.description}\n            />\n          </Form.Field>\n          <Divider horizontal>\n            <Icon circular\n              name='photo'\n              color='blue'\n            />\n          </Divider>\n          <Button fluid\n            content={`Select Photos (${this.state.photos.length})`}\n            onClick={this.handleSelectPhotos}\n          />\n        </Segment>\n        <Segment>\n          <Button fluid primary\n            disabled={this.state.isLoading}\n            loading={this.state.isLoading}\n            onClick={this.handleContinue}\n            icon='right arrow'\n            labelPosition='right'\n            content='Continue'\n          />\n        </Segment>\n      </div>\n    );\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./app/client/assets/js/components/Submit/Listing/index.js","'use strict';\n\nvar hasOwn = Object.prototype.hasOwnProperty;\nvar toStr = Object.prototype.toString;\n\nvar isArray = function isArray(arr) {\n\tif (typeof Array.isArray === 'function') {\n\t\treturn Array.isArray(arr);\n\t}\n\n\treturn toStr.call(arr) === '[object Array]';\n};\n\nvar isPlainObject = function isPlainObject(obj) {\n\tif (!obj || toStr.call(obj) !== '[object Object]') {\n\t\treturn false;\n\t}\n\n\tvar hasOwnConstructor = hasOwn.call(obj, 'constructor');\n\tvar hasIsPrototypeOf = obj.constructor && obj.constructor.prototype && hasOwn.call(obj.constructor.prototype, 'isPrototypeOf');\n\t// Not own constructor property must be Object\n\tif (obj.constructor && !hasOwnConstructor && !hasIsPrototypeOf) {\n\t\treturn false;\n\t}\n\n\t// Own properties are enumerated firstly, so to speed up,\n\t// if last one is own, then all properties are own.\n\tvar key;\n\tfor (key in obj) {/**/}\n\n\treturn typeof key === 'undefined' || hasOwn.call(obj, key);\n};\n\nmodule.exports = function extend() {\n\tvar options, name, src, copy, copyIsArray, clone,\n\t\ttarget = arguments[0],\n\t\ti = 1,\n\t\tlength = arguments.length,\n\t\tdeep = false;\n\n\t// Handle a deep copy situation\n\tif (typeof target === 'boolean') {\n\t\tdeep = target;\n\t\ttarget = arguments[1] || {};\n\t\t// skip the boolean and the target\n\t\ti = 2;\n\t} else if ((typeof target !== 'object' && typeof target !== 'function') || target == null) {\n\t\ttarget = {};\n\t}\n\n\tfor (; i < length; ++i) {\n\t\toptions = arguments[i];\n\t\t// Only deal with non-null/undefined values\n\t\tif (options != null) {\n\t\t\t// Extend the base object\n\t\t\tfor (name in options) {\n\t\t\t\tsrc = target[name];\n\t\t\t\tcopy = options[name];\n\n\t\t\t\t// Prevent never-ending loop\n\t\t\t\tif (target !== copy) {\n\t\t\t\t\t// Recurse if we're merging plain objects or arrays\n\t\t\t\t\tif (deep && copy && (isPlainObject(copy) || (copyIsArray = isArray(copy)))) {\n\t\t\t\t\t\tif (copyIsArray) {\n\t\t\t\t\t\t\tcopyIsArray = false;\n\t\t\t\t\t\t\tclone = src && isArray(src) ? src : [];\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tclone = src && isPlainObject(src) ? src : {};\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Never move original objects, clone them\n\t\t\t\t\t\ttarget[name] = extend(deep, clone, copy);\n\n\t\t\t\t\t// Don't bring in undefined values\n\t\t\t\t\t} else if (typeof copy !== 'undefined') {\n\t\t\t\t\t\ttarget[name] = copy;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Return the modified object\n\treturn target;\n};\n\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/extend/index.js\n// module id = 1311\n// module chunks = 9","// Copyright 2014 Simon Lydell\r\n// X11 (“MIT”) Licensed. (See LICENSE.)\r\n\r\nvoid (function(root, factory) {\r\n  if (typeof define === \"function\" && define.amd) {\r\n    define(factory)\r\n  } else if (typeof exports === \"object\") {\r\n    module.exports = factory()\r\n  } else {\r\n    root.resolveUrl = factory()\r\n  }\r\n}(this, function() {\r\n\r\n  function resolveUrl(/* ...urls */) {\r\n    var numUrls = arguments.length\r\n\r\n    if (numUrls === 0) {\r\n      throw new Error(\"resolveUrl requires at least one argument; got none.\")\r\n    }\r\n\r\n    var base = document.createElement(\"base\")\r\n    base.href = arguments[0]\r\n\r\n    if (numUrls === 1) {\r\n      return base.href\r\n    }\r\n\r\n    var head = document.getElementsByTagName(\"head\")[0]\r\n    head.insertBefore(base, head.firstChild)\r\n\r\n    var a = document.createElement(\"a\")\r\n    var resolved\r\n\r\n    for (var index = 1; index < numUrls; index++) {\r\n      a.href = arguments[index]\r\n      resolved = a.href\r\n      base.href = resolved\r\n    }\r\n\r\n    head.removeChild(base)\r\n\r\n    return resolved\r\n  }\r\n\r\n  return resolveUrl\r\n\r\n}));\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/resolve-url/resolve-url.js\n// module id = 1318\n// module chunks = 9","// Generated by Babel\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.encode = encode;\n/* global: window */\n\nvar _window = window;\nvar btoa = _window.btoa;\nfunction encode(data) {\n  return btoa(unescape(encodeURIComponent(data)));\n}\n\nvar isSupported = exports.isSupported = \"btoa\" in window;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/tus-js-client/lib.es5/browser/base64.js\n// module id = 1319\n// module chunks = 9","// Generated by Babel\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.newRequest = newRequest;\nexports.resolveUrl = resolveUrl;\n\nvar _resolveUrl = require(\"resolve-url\");\n\nvar _resolveUrl2 = _interopRequireDefault(_resolveUrl);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction newRequest() {\n  return new window.XMLHttpRequest();\n} /* global window */\n\n\nfunction resolveUrl(origin, link) {\n  return (0, _resolveUrl2.default)(origin, link);\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/tus-js-client/lib.es5/browser/request.js\n// module id = 1320\n// module chunks = 9","// Generated by Babel\n\"use strict\";\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getSource = getSource;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar FileSource = function () {\n  function FileSource(file) {\n    _classCallCheck(this, FileSource);\n\n    this._file = file;\n    this.size = file.size;\n  }\n\n  _createClass(FileSource, [{\n    key: \"slice\",\n    value: function slice(start, end) {\n      return this._file.slice(start, end);\n    }\n  }, {\n    key: \"close\",\n    value: function close() {}\n  }]);\n\n  return FileSource;\n}();\n\nfunction getSource(input) {\n  // Since we emulate the Blob type in our tests (not all target browsers\n  // support it), we cannot use `instanceof` for testing whether the input value\n  // can be handled. Instead, we simply check is the slice() function and the\n  // size property are available.\n  if (typeof input.slice === \"function\" && typeof input.size !== \"undefined\") {\n    return new FileSource(input);\n  }\n\n  throw new Error(\"source object may only be an instance of File or Blob in this environment\");\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/tus-js-client/lib.es5/browser/source.js\n// module id = 1321\n// module chunks = 9","// Generated by Babel\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar DetailedError = function (_Error) {\n  _inherits(DetailedError, _Error);\n\n  function DetailedError(error) {\n    var causingErr = arguments.length <= 1 || arguments[1] === undefined ? null : arguments[1];\n    var xhr = arguments.length <= 2 || arguments[2] === undefined ? null : arguments[2];\n\n    _classCallCheck(this, DetailedError);\n\n    var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(DetailedError).call(this, error.message));\n\n    _this.originalRequest = xhr;\n    _this.causingError = causingErr;\n\n    var message = error.message;\n    if (causingErr != null) {\n      message += \", caused by \" + causingErr.toString();\n    }\n    if (xhr != null) {\n      message += \", originated from request (response code: \" + xhr.status + \", response text: \" + xhr.responseText + \")\";\n    }\n    _this.message = message;\n    return _this;\n  }\n\n  return DetailedError;\n}(Error);\n\nexports.default = DetailedError;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/tus-js-client/lib.es5/error.js\n// module id = 1322\n// module chunks = 9","// Generated by Babel\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = fingerprint;\n/**\n * Generate a fingerprint for a file which will be used the store the endpoint\n *\n * @param {File} file\n * @return {String}\n */\nfunction fingerprint(file) {\n  return [\"tus\", file.name, file.type, file.size, file.lastModified].join(\"-\");\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/tus-js-client/lib.es5/fingerprint.js\n// module id = 1323\n// module chunks = 9","// Generated by Babel\n\"use strict\";\n\nvar _upload = require(\"./upload\");\n\nvar _upload2 = _interopRequireDefault(_upload);\n\nvar _storage = require(\"./node/storage\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/* global window */\nvar defaultOptions = _upload2.default.defaultOptions;\n\n\nif (typeof window !== \"undefined\") {\n  // Browser environment using XMLHttpRequest\n  var _window = window;\n  var XMLHttpRequest = _window.XMLHttpRequest;\n  var Blob = _window.Blob;\n\n\n  var isSupported = XMLHttpRequest && Blob && typeof Blob.prototype.slice === \"function\";\n} else {\n  // Node.js environment using http module\n  var isSupported = true;\n}\n\n// The usage of the commonjs exporting syntax instead of the new ECMAScript\n// one is actually inteded and prevents weird behaviour if we are trying to\n// import this module in another module using Babel.\nmodule.exports = {\n  Upload: _upload2.default,\n  isSupported: isSupported,\n  canStoreURLs: _storage.canStoreURLs,\n  defaultOptions: defaultOptions\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/tus-js-client/lib.es5/index.js\n// module id = 1324\n// module chunks = 9","// Generated by Babel\n\"use strict\";\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /* global window */\n\n\n// We import the files used inside the Node environment which are rewritten\n// for browsers using the rules defined in the package.json\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _fingerprint = require(\"./fingerprint\");\n\nvar _fingerprint2 = _interopRequireDefault(_fingerprint);\n\nvar _error = require(\"./error\");\n\nvar _error2 = _interopRequireDefault(_error);\n\nvar _extend = require(\"extend\");\n\nvar _extend2 = _interopRequireDefault(_extend);\n\nvar _request = require(\"./node/request\");\n\nvar _source = require(\"./node/source\");\n\nvar _base = require(\"./node/base64\");\n\nvar Base64 = _interopRequireWildcard(_base);\n\nvar _storage = require(\"./node/storage\");\n\nvar Storage = _interopRequireWildcard(_storage);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar defaultOptions = {\n  endpoint: \"\",\n  fingerprint: _fingerprint2.default,\n  resume: true,\n  onProgress: null,\n  onChunkComplete: null,\n  onSuccess: null,\n  onError: null,\n  headers: {},\n  chunkSize: Infinity,\n  withCredentials: false,\n  uploadUrl: null,\n  uploadSize: null,\n  overridePatchMethod: false,\n  retryDelays: null\n};\n\nvar Upload = function () {\n  function Upload(file, options) {\n    _classCallCheck(this, Upload);\n\n    this.options = (0, _extend2.default)(true, {}, defaultOptions, options);\n\n    // The underlying File/Blob object\n    this.file = file;\n\n    // The URL against which the file will be uploaded\n    this.url = null;\n\n    // The underlying XHR object for the current PATCH request\n    this._xhr = null;\n\n    // The fingerpinrt for the current file (set after start())\n    this._fingerprint = null;\n\n    // The offset used in the current PATCH request\n    this._offset = null;\n\n    // True if the current PATCH request has been aborted\n    this._aborted = false;\n\n    // The file's size in bytes\n    this._size = null;\n\n    // The Source object which will wrap around the given file and provides us\n    // with a unified interface for getting its size and slice chunks from its\n    // content allowing us to easily handle Files, Blobs, Buffers and Streams.\n    this._source = null;\n\n    // The current count of attempts which have been made. Null indicates none.\n    this._retryAttempt = 0;\n\n    // The timeout's ID which is used to delay the next retry\n    this._retryTimeout = null;\n\n    // The offset of the remote upload before the latest attempt was started.\n    this._offsetBeforeRetry = 0;\n  }\n\n  _createClass(Upload, [{\n    key: \"start\",\n    value: function start() {\n      var _this = this;\n\n      var file = this.file;\n\n      if (!file) {\n        this._emitError(new Error(\"tus: no file or stream to upload provided\"));\n        return;\n      }\n\n      if (!this.options.endpoint) {\n        this._emitError(new Error(\"tus: no endpoint provided\"));\n        return;\n      }\n\n      var source = this._source = (0, _source.getSource)(file, this.options.chunkSize);\n\n      // Firstly, check if the caller has supplied a manual upload size or else\n      // we will use the calculated size by the source object.\n      if (this.options.uploadSize != null) {\n        var size = +this.options.uploadSize;\n        if (isNaN(size)) {\n          throw new Error(\"tus: cannot convert `uploadSize` option into a number\");\n        }\n\n        this._size = size;\n      } else {\n        var size = source.size;\n\n        // The size property will be null if we cannot calculate the file's size,\n        // for example if you handle a stream.\n        if (size == null) {\n          throw new Error(\"tus: cannot automatically derive upload's size from input and must be specified manually using the `uploadSize` option\");\n        }\n\n        this._size = size;\n      }\n\n      var retryDelays = this.options.retryDelays;\n      if (retryDelays != null) {\n        if (Object.prototype.toString.call(retryDelays) !== \"[object Array]\") {\n          throw new Error(\"tus: the `retryDelays` option must either be an array or null\");\n        } else {\n          (function () {\n            var errorCallback = _this.options.onError;\n            _this.options.onError = function (err) {\n              // Restore the original error callback which may have been set.\n              _this.options.onError = errorCallback;\n\n              // We will reset the attempt counter if\n              // - we were already able to connect to the server (offset != null) and\n              // - we were able to upload a small chunk of data to the server\n              var shouldResetDelays = _this._offset != null && _this._offset > _this._offsetBeforeRetry;\n              if (shouldResetDelays) {\n                _this._retryAttempt = 0;\n              }\n\n              var isOnline = true;\n              if (typeof window !== \"undefined\" && \"navigator\" in window && window.navigator.onLine === false) {\n                isOnline = false;\n              }\n\n              // We only attempt a retry if\n              // - we didn't exceed the maxium number of retries, yet, and\n              // - this error was caused by a request or it's response and\n              // - the browser does not indicate that we are offline\n              var shouldRetry = _this._retryAttempt < retryDelays.length && err.originalRequest != null && isOnline;\n\n              if (!shouldRetry) {\n                _this._emitError(err);\n                return;\n              }\n\n              var delay = retryDelays[_this._retryAttempt++];\n\n              _this._offsetBeforeRetry = _this._offset;\n              _this.options.uploadUrl = _this.url;\n\n              _this._retryTimeout = setTimeout(function () {\n                _this.start();\n              }, delay);\n            };\n          })();\n        }\n      }\n\n      // A URL has manually been specified, so we try to resume\n      if (this.options.uploadUrl != null) {\n        this.url = this.options.uploadUrl;\n        this._resumeUpload();\n        return;\n      }\n\n      // Try to find the endpoint for the file in the storage\n      if (this.options.resume) {\n        this._fingerprint = this.options.fingerprint(file);\n        var resumedUrl = Storage.getItem(this._fingerprint);\n\n        if (resumedUrl != null) {\n          this.url = resumedUrl;\n          this._resumeUpload();\n          return;\n        }\n      }\n\n      // An upload has not started for the file yet, so we start a new one\n      this._createUpload();\n    }\n  }, {\n    key: \"abort\",\n    value: function abort() {\n      if (this._xhr !== null) {\n        this._xhr.abort();\n        this._source.close();\n        this._aborted = true;\n      }\n\n      if (this._retryTimeout != null) {\n        clearTimeout(this._retryTimeout);\n        this._retryTimeout = null;\n      }\n    }\n  }, {\n    key: \"_emitXhrError\",\n    value: function _emitXhrError(xhr, err, causingErr) {\n      this._emitError(new _error2.default(err, causingErr, xhr));\n    }\n  }, {\n    key: \"_emitError\",\n    value: function _emitError(err) {\n      if (typeof this.options.onError === \"function\") {\n        this.options.onError(err);\n      } else {\n        throw err;\n      }\n    }\n  }, {\n    key: \"_emitSuccess\",\n    value: function _emitSuccess() {\n      if (typeof this.options.onSuccess === \"function\") {\n        this.options.onSuccess();\n      }\n    }\n\n    /**\n     * Publishes notification when data has been sent to the server. This\n     * data may not have been accepted by the server yet.\n     * @param  {number} bytesSent  Number of bytes sent to the server.\n     * @param  {number} bytesTotal Total number of bytes to be sent to the server.\n     */\n\n  }, {\n    key: \"_emitProgress\",\n    value: function _emitProgress(bytesSent, bytesTotal) {\n      if (typeof this.options.onProgress === \"function\") {\n        this.options.onProgress(bytesSent, bytesTotal);\n      }\n    }\n\n    /**\n     * Publishes notification when a chunk of data has been sent to the server\n     * and accepted by the server.\n     * @param  {number} chunkSize  Size of the chunk that was accepted by the\n     *                             server.\n     * @param  {number} bytesAccepted Total number of bytes that have been\n     *                                accepted by the server.\n     * @param  {number} bytesTotal Total number of bytes to be sent to the server.\n     */\n\n  }, {\n    key: \"_emitChunkComplete\",\n    value: function _emitChunkComplete(chunkSize, bytesAccepted, bytesTotal) {\n      if (typeof this.options.onChunkComplete === \"function\") {\n        this.options.onChunkComplete(chunkSize, bytesAccepted, bytesTotal);\n      }\n    }\n\n    /**\n     * Set the headers used in the request and the withCredentials property\n     * as defined in the options\n     *\n     * @param {XMLHttpRequest} xhr\n     */\n\n  }, {\n    key: \"_setupXHR\",\n    value: function _setupXHR(xhr) {\n      xhr.setRequestHeader(\"Tus-Resumable\", \"1.0.0\");\n      var headers = this.options.headers;\n\n      for (var name in headers) {\n        xhr.setRequestHeader(name, headers[name]);\n      }\n\n      xhr.withCredentials = this.options.withCredentials;\n    }\n\n    /**\n     * Create a new upload using the creation extension by sending a POST\n     * request to the endpoint. After successful creation the file will be\n     * uploaded\n     *\n     * @api private\n     */\n\n  }, {\n    key: \"_createUpload\",\n    value: function _createUpload() {\n      var _this2 = this;\n\n      var xhr = (0, _request.newRequest)();\n      xhr.open(\"POST\", this.options.endpoint, true);\n\n      xhr.onload = function () {\n        if (!(xhr.status >= 200 && xhr.status < 300)) {\n          _this2._emitXhrError(xhr, new Error(\"tus: unexpected response while creating upload\"));\n          return;\n        }\n\n        _this2.url = (0, _request.resolveUrl)(_this2.options.endpoint, xhr.getResponseHeader(\"Location\"));\n\n        if (_this2.options.resume) {\n          Storage.setItem(_this2._fingerprint, _this2.url);\n        }\n\n        _this2._offset = 0;\n        _this2._startUpload();\n      };\n\n      xhr.onerror = function (err) {\n        _this2._emitXhrError(xhr, new Error(\"tus: failed to create upload\"), err);\n      };\n\n      this._setupXHR(xhr);\n      xhr.setRequestHeader(\"Upload-Length\", this._size);\n\n      // Add metadata if values have been added\n      var metadata = encodeMetadata(this.options.metadata);\n      if (metadata !== \"\") {\n        xhr.setRequestHeader(\"Upload-Metadata\", metadata);\n      }\n\n      xhr.send(null);\n    }\n\n    /*\n     * Try to resume an existing upload. First a HEAD request will be sent\n     * to retrieve the offset. If the request fails a new upload will be\n     * created. In the case of a successful response the file will be uploaded.\n     *\n     * @api private\n     */\n\n  }, {\n    key: \"_resumeUpload\",\n    value: function _resumeUpload() {\n      var _this3 = this;\n\n      var xhr = (0, _request.newRequest)();\n      xhr.open(\"HEAD\", this.url, true);\n\n      xhr.onload = function () {\n        if (!(xhr.status >= 200 && xhr.status < 300)) {\n          if (_this3.options.resume) {\n            // Remove stored fingerprint and corresponding endpoint,\n            // since the file can not be found\n            Storage.removeItem(_this3._fingerprint);\n          }\n\n          // Try to create a new upload\n          _this3.url = null;\n          _this3._createUpload();\n          return;\n        }\n\n        var offset = parseInt(xhr.getResponseHeader(\"Upload-Offset\"), 10);\n        if (isNaN(offset)) {\n          _this3._emitXhrError(xhr, new Error(\"tus: invalid or missing offset value\"));\n          return;\n        }\n\n        var length = parseInt(xhr.getResponseHeader(\"Upload-Length\"), 10);\n        if (isNaN(length)) {\n          _this3._emitXhrError(xhr, new Error(\"tus: invalid or missing length value\"));\n          return;\n        }\n\n        // Upload has already been completed and we do not need to send additional\n        // data to the server\n        if (offset === length) {\n          _this3._emitProgress(length, length);\n          _this3._emitSuccess();\n          return;\n        }\n\n        _this3._offset = offset;\n        _this3._startUpload();\n      };\n\n      xhr.onerror = function (err) {\n        _this3._emitXhrError(xhr, new Error(\"tus: failed to resume upload\"), err);\n      };\n\n      this._setupXHR(xhr);\n      xhr.send(null);\n    }\n\n    /**\n     * Start uploading the file using PATCH requests. The file will be divided\n     * into chunks as specified in the chunkSize option. During the upload\n     * the onProgress event handler may be invoked multiple times.\n     *\n     * @api private\n     */\n\n  }, {\n    key: \"_startUpload\",\n    value: function _startUpload() {\n      var _this4 = this;\n\n      var xhr = this._xhr = (0, _request.newRequest)();\n\n      // Some browser and servers may not support the PATCH method. For those\n      // cases, you can tell tus-js-client to use a POST request with the\n      // X-HTTP-Method-Override header for simulating a PATCH request.\n      if (this.options.overridePatchMethod) {\n        xhr.open(\"POST\", this.url, true);\n        xhr.setRequestHeader(\"X-HTTP-Method-Override\", \"PATCH\");\n      } else {\n        xhr.open(\"PATCH\", this.url, true);\n      }\n\n      xhr.onload = function () {\n        if (!(xhr.status >= 200 && xhr.status < 300)) {\n          _this4._emitXhrError(xhr, new Error(\"tus: unexpected response while uploading chunk\"));\n          return;\n        }\n\n        var offset = parseInt(xhr.getResponseHeader(\"Upload-Offset\"), 10);\n        if (isNaN(offset)) {\n          _this4._emitXhrError(xhr, new Error(\"tus: invalid or missing offset value\"));\n          return;\n        }\n\n        _this4._emitProgress(offset, _this4._size);\n        _this4._emitChunkComplete(offset - _this4._offset, offset, _this4._size);\n\n        _this4._offset = offset;\n\n        if (offset == _this4._size) {\n          // Yay, finally done :)\n          _this4._emitSuccess();\n          _this4._source.close();\n          return;\n        }\n\n        _this4._startUpload();\n      };\n\n      xhr.onerror = function (err) {\n        // Don't emit an error if the upload was aborted manually\n        if (_this4._aborted) {\n          return;\n        }\n\n        _this4._emitXhrError(xhr, new Error(\"tus: failed to upload chunk at offset \" + _this4._offset), err);\n      };\n\n      // Test support for progress events before attaching an event listener\n      if (\"upload\" in xhr) {\n        xhr.upload.onprogress = function (e) {\n          if (!e.lengthComputable) {\n            return;\n          }\n\n          _this4._emitProgress(start + e.loaded, _this4._size);\n        };\n      }\n\n      this._setupXHR(xhr);\n\n      xhr.setRequestHeader(\"Upload-Offset\", this._offset);\n      xhr.setRequestHeader(\"Content-Type\", \"application/offset+octet-stream\");\n\n      var start = this._offset;\n      var end = this._offset + this.options.chunkSize;\n\n      // The specified chunkSize may be Infinity or the calcluated end position\n      // may exceed the file's size. In both cases, we limit the end position to\n      // the input's total size for simpler calculations and correctness.\n      if (end === Infinity || end > this._size) {\n        end = this._size;\n      }\n\n      xhr.send(this._source.slice(start, end));\n    }\n  }]);\n\n  return Upload;\n}();\n\nfunction encodeMetadata(metadata) {\n  if (!Base64.isSupported) {\n    return \"\";\n  }\n\n  var encoded = [];\n\n  for (var key in metadata) {\n    encoded.push(key + \" \" + Base64.encode(metadata[key]));\n  }\n\n  return encoded.join(\",\");\n}\n\nUpload.defaultOptions = defaultOptions;\n\nexports.default = Upload;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/tus-js-client/lib.es5/upload.js\n// module id = 1325\n// module chunks = 9"],"sourceRoot":""}
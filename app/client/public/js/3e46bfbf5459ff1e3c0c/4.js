webpackJsonp([4],{1304:function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=a(75),l=a.n(i),s=a(0),c=a.n(s),p=a(52),u=a(186),d=(a.n(u),a(53)),h=a(118),m=a(74),f=a(51),E=a(574);a.d(t,"default",function(){return j});var y,g,b,v,w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},C=function(e){return w({},e.auth)},P=function(e){return{dispatch:e,actions:{alert:a.i(h.a)(f.d,e),auth:a.i(h.a)(f.a,e)}}},j=(y=a.i(p.connect)(C,P))((v=b=function(e){function t(a){n(this,t);var o=r(this,e.call(this,a));return o.state={email:"",verificationEmail:"",password:"",isLoading:!1,redirectTo:o.props.location.query.redirect||"/"},o.handleSignup=o.handleSignup.bind(o),o.handleChange=o.handleChange.bind(o),o}return o(t,e),t.prototype.componentWillMount=function(){f.a.isAuthenticated()&&this.props.dispatch(a.i(u.push)(this.state.redirectTo))},t.prototype.componentDidMount=function(){E.a.done()},t.prototype.hasValidationError=function(e){return!(!l()(this.props.error,"validation.keys")||!this.props.error.validation.keys.includes(e))},t.prototype.handleSignup=function(e){var t=this;e.preventDefault(),this.setState({isLoading:!0},function(){var e=t.state,n=e.email,r=e.verificationEmail,o=e.password;t.props.actions.auth.signup({email:n,verificationEmail:r,password:o}).then(function(){return t.props.actions.auth.login({email:n,password:o})}).then(function(){return t.props.dispatch(a.i(u.push)(t.state.redirectTo))}).catch(function(e){t.setState({isLoading:!1}),t.props.actions.alert.error(e.message)})})},t.prototype.handleChange=function(e){var t;this.setState((t={},t[e.target.name]=e.target.value,t))},t.prototype.render=function(){return c.a.createElement(m.k,null,c.a.createElement(m.k.Column,{width:"4",only:"computer"}),c.a.createElement(m.k.Column,{width:"16",computer:"8"},c.a.createElement(m.b,{stacked:!0,attached:"bottom"},c.a.createElement(m.a,{autoComplete:"off"},c.a.createElement(m.a.Group,{widths:"equal"},c.a.createElement(m.a.Field,{error:this.hasValidationError("email")},c.a.createElement("label",null,"Email"),c.a.createElement(m.e,{icon:"mail",iconPosition:"left",name:"email",onChange:this.handleChange,placeholder:"Email address",type:"text",value:this.state.email})),c.a.createElement(m.a.Field,{error:this.hasValidationError("verificationEmail")},c.a.createElement("label",null,"Confirm Email"),c.a.createElement(m.e,{name:"verificationEmail",onChange:this.handleChange,placeholder:"Re-enter email address",type:"text",value:this.state.verificationEmail}))),c.a.createElement(m.a.Field,{error:this.hasValidationError("password")},c.a.createElement("label",null,"Password"),c.a.createElement(m.e,{icon:"lock",iconPosition:"left",name:"password",onChange:this.handleChange,placeholder:"New password",type:"password",value:this.state.password})),c.a.createElement(m.c,{fluid:!0,primary:!0,loading:this.state.isLoading,disabled:this.state.isLoading,onClick:this.handleSignup,content:"Sign Up"}))),c.a.createElement(m.b,null,c.a.createElement(m.d,{style:{textAlign:"center"}},"Already have an account? ",c.a.createElement(d.c,{to:"/login"},"Log In")))),c.a.createElement(m.k.Column,{width:"4",only:"computer"}))},t}(c.a.Component),b.propTypes={error:s.PropTypes.object,dispatch:s.PropTypes.func.isRequired,actions:s.PropTypes.object.isRequired,location:s.PropTypes.object.isRequired},g=v))||g}});